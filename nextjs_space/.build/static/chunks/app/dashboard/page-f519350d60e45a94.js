(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[702],{2202:function(e,s,t){Promise.resolve().then(t.bind(t,5093))},5093:function(e,s,t){"use strict";t.d(s,{ContentGenerator:function(){return sf}});var a=t(5444),r=t(9300),i=t(2422),l=t(1946),n=t(572),d=t(4805),o=t(1585),c=t(9209),m=t(3485),u=t(5522);let x=c.fC;c.xz;let f=c.h_;c.x8;let h=r.forwardRef(({className:e,...s},t)=>(0,a.jsx)(c.aV,{ref:t,className:(0,u.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...s}));h.displayName=c.aV.displayName;let p=r.forwardRef(({className:e,children:s,...t},r)=>(0,a.jsxs)(f,{children:[(0,a.jsx)(h,{}),(0,a.jsxs)(c.VY,{ref:r,className:(0,u.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...t,children:[s,(0,a.jsxs)(c.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,a.jsx)(m.Z,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Close"})]})]})]}));p.displayName=c.VY.displayName;let g=({className:e,...s})=>(0,a.jsx)("div",{className:(0,u.cn)("flex flex-col space-y-1.5 text-center sm:text-left",e),...s});g.displayName="DialogHeader";let j=({className:e,...s})=>(0,a.jsx)("div",{className:(0,u.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...s});j.displayName="DialogFooter";let b=r.forwardRef(({className:e,...s},t)=>(0,a.jsx)(c.Dx,{ref:t,className:(0,u.cn)("text-lg font-semibold leading-none tracking-tight",e),...s}));b.displayName=c.Dx.displayName;let N=r.forwardRef(({className:e,...s},t)=>(0,a.jsx)(c.dk,{ref:t,className:(0,u.cn)("text-sm text-muted-foreground",e),...s}));N.displayName=c.dk.displayName;let v=r.forwardRef(({className:e,...s},t)=>(0,a.jsx)("textarea",{className:(0,u.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:t,...s}));v.displayName="Textarea";var y=t(3492);function w({open:e,onOpenChange:s,title:t,description:n,placeholder:d,type:c,onSubmit:m}){let[u,f]=(0,r.useState)(""),[h,w]=(0,r.useState)(!1),k=async()=>{if(!u.trim()){o.Am.error("Veuillez entrer un prompt d'abord");return}w(!0);try{let e=await fetch("/api/enhance-prompt",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({prompt:u,type:c})});if(!e.ok)throw Error("Failed to enhance");let s=await e.json();f(s.enhancedPrompt),o.Am.success("✨ Prompt am\xe9lior\xe9 avec succ\xe8s !")}catch(e){o.Am.error("\xc9chec de l'am\xe9lioration du prompt")}finally{w(!1)}};return(0,a.jsx)(x,{open:e,onOpenChange:s,children:(0,a.jsxs)(p,{className:"sm:max-w-[600px] bg-gray-900 border-white/10",children:[(0,a.jsxs)(g,{children:[(0,a.jsx)(b,{className:"text-white",children:t}),(0,a.jsx)(N,{className:"text-gray-400",children:n})]}),(0,a.jsxs)("div",{className:"space-y-4 py-4",children:[(0,a.jsx)(v,{placeholder:d,value:u,onChange:e=>f(e.target.value),className:"min-h-[150px] bg-gray-800 border-white/10 text-white placeholder:text-gray-500 focus:border-purple-500"}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("p",{className:"text-sm text-gray-400",children:"\uD83D\uDCA1 Astuce: Plus votre description est d\xe9taill\xe9e, meilleur sera le r\xe9sultat"}),(0,a.jsx)(i.z,{variant:"outline",size:"sm",onClick:k,disabled:h||!u.trim(),className:"bg-purple-500/10 hover:bg-purple-500/20 border-purple-500/30 text-purple-300",children:h?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(l.Z,{className:"w-4 h-4 mr-2 animate-spin"}),"Am\xe9lioration..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(y.Z,{className:"w-4 h-4 mr-2"}),"Am\xe9liorer avec IA"]})})]})]}),(0,a.jsxs)(j,{children:[(0,a.jsx)(i.z,{variant:"ghost",onClick:()=>{f(""),s(!1)},className:"text-gray-400 hover:text-white",children:"Annuler"}),(0,a.jsx)(i.z,{onClick:()=>{if(!u.trim()){o.Am.error("Veuillez entrer un prompt");return}m(u.trim()),f(""),s(!1)},disabled:!u.trim(),className:"bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600",children:"Continuer"})]})]})})}function k({onJobCreated:e,disabled:s}){let[t,c]=(0,r.useState)(!1),[m,u]=(0,r.useState)(null),[x,f]=(0,r.useState)(null),[h,p]=(0,r.useState)(!1),[g,j]=(0,r.useState)(!1),[b,N]=(0,r.useState)(""),v=(0,r.useRef)(null),y=async s=>{if(x){c(!0);try{let t=new FormData;t.append("file",x),t.append("imagePrompt",b),t.append("videoPrompt",s);let a=await fetch("/api/upload",{method:"POST",body:t});if(!a.ok){let e=await a.json();throw Error(e.error||"Upload failed")}let r=await a.json();o.Am.success("✅ Photo t\xe9l\xe9charg\xe9e ! G\xe9n\xe9ration en cours..."),e(r.jobId),f(null),u(null),N(""),v.current&&(v.current.value="")}catch(e){console.error("Upload error:",e),o.Am.error(e instanceof Error?e.message:"\xc9chec du t\xe9l\xe9chargement")}finally{c(!1)}}};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"space-y-4",children:[m?(0,a.jsxs)("div",{className:"relative aspect-square max-w-sm mx-auto rounded-2xl overflow-hidden border-2 border-primary/50 shadow-lg shadow-primary/20",children:[(0,a.jsx)("img",{src:m,alt:"Preview",className:"w-full h-full object-cover"}),t&&(0,a.jsx)("div",{className:"absolute inset-0 bg-background/80 backdrop-blur-sm flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(l.Z,{className:"w-12 h-12 text-primary mx-auto mb-4 animate-spin"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Uploading..."})]})})]}):(0,a.jsx)("div",{onDrop:e=>{e.preventDefault();let s=e.dataTransfer.files[0];if(s){if(!s.type.startsWith("image/")){o.Am.error("Veuillez s\xe9lectionner un fichier image");return}if(s.size>10485760){o.Am.error("Le fichier est trop volumineux (max 10MB)");return}f(s);let e=new FileReader;e.onload=e=>u(e.target?.result),e.readAsDataURL(s),p(!0)}},onDragOver:e=>{e.preventDefault()},className:"group relative border-2 border-dashed border-border rounded-2xl p-12 text-center  hover:border-primary/50 hover:bg-primary/5  transition-smooth cursor-pointer focus-within:ring-2 focus-within:ring-primary focus-within:ring-offset-2",onClick:()=>!s&&v.current?.click(),role:"button",tabIndex:0,"aria-label":"Upload photo",children:(0,a.jsxs)("div",{className:"transition-smooth group-hover:scale-105",children:[(0,a.jsx)("div",{className:"w-20 h-20 mx-auto mb-4 bg-muted rounded-2xl flex items-center justify-center group-hover:bg-primary/20 transition-smooth",children:(0,a.jsx)(n.Z,{className:"w-10 h-10 text-muted-foreground group-hover:text-primary transition-smooth"})}),(0,a.jsx)("p",{className:"text-foreground font-semibold mb-2",children:"Drag & drop your photo here"}),(0,a.jsx)("p",{className:"text-muted-foreground text-sm mb-4",children:"or click to browse"}),(0,a.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,a.jsx)("span",{className:"px-3 py-1 bg-muted rounded-full text-xs text-muted-foreground",children:"PNG"}),(0,a.jsx)("span",{className:"px-3 py-1 bg-muted rounded-full text-xs text-muted-foreground",children:"JPG"}),(0,a.jsx)("span",{className:"px-3 py-1 bg-muted rounded-full text-xs text-muted-foreground",children:"WEBP"})]}),(0,a.jsx)("p",{className:"text-muted-foreground text-xs mt-2",children:"Max 10MB"})]})}),(0,a.jsx)("input",{ref:v,type:"file",accept:"image/*",onChange:e=>{let s=e.target.files?.[0];if(!s)return;if(!s.type.startsWith("image/")){o.Am.error("Veuillez s\xe9lectionner un fichier image");return}if(s.size>10485760){o.Am.error("Le fichier est trop volumineux (max 10MB)");return}f(s);let t=new FileReader;t.onload=e=>u(e.target?.result),t.readAsDataURL(s),p(!0)},className:"hidden",disabled:s||t,"aria-label":"File input"}),m&&!t&&(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsx)(i.z,{variant:"outline",onClick:()=>{u(null),f(null),N(""),v.current&&(v.current.value="")},className:"flex-1 hover-scale",children:"Cancel"}),(0,a.jsxs)(i.z,{onClick:()=>p(!0),disabled:s,className:"flex-1 bg-primary hover:bg-primary/90 text-primary-foreground hover-scale shadow-lg shadow-primary/20",children:[(0,a.jsx)(d.Z,{className:"w-4 h-4 mr-2"}),"Edit Prompts"]})]})]}),(0,a.jsx)(w,{open:h,onOpenChange:p,title:"\uD83C\uDFA8 Describe the Image Transformation",description:"How do you want to transform your image? Be creative!",placeholder:"Example: Transform this photo into colorful cartoon style with neon effects, cyberpunk futuristic vibe, vibrant pink and blue colors, 8k high quality...",type:"image",onSubmit:e=>{N(e),j(!0)}}),(0,a.jsx)(w,{open:g,onOpenChange:j,title:"\uD83C\uDFAC Describe the Video Animation",description:"How do you want to animate this image into a video?",placeholder:"Example: Create dynamic animation with progressive zoom, smooth rotation, floating sparkle particles, cinematic transitions, dramatic camera movement, 15 second duration...",type:"video",onSubmit:y})]})}var C=t(9212);let S=r.forwardRef(({className:e,value:s,...t},r)=>(0,a.jsx)(C.fC,{ref:r,className:(0,u.cn)("relative h-4 w-full overflow-hidden rounded-full bg-secondary",e),...t,children:(0,a.jsx)(C.z$,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(s||0)}%)`}})}));S.displayName=C.fC.displayName;var z=t(6948),E=t(4990),T=t(6488),Z=t(7694),A=t(6124),R=t(2817),F=t(9335);let D=[{key:"TRANSFORM",label:"Transform",icon:y.Z,description:"AI is enhancing your image...",color:"text-primary",bgColor:"bg-primary/20"},{key:"ANIMATE",label:"Animate",icon:E.Z,description:"Creating video animation...",color:"text-secondary",bgColor:"bg-secondary/20"},{key:"FORMAT",label:"Format",icon:T.Z,description:"Optimizing for Instagram...",color:"text-blue-400",bgColor:"bg-blue-400/20"}];function I({jobId:e,onComplete:s}){let[t,i]=(0,r.useState)(null),[n,d]=(0,r.useState)(!0);if((0,r.useEffect)(()=>{if(!e)return;let t=async()=>{try{let t=await fetch(`/api/jobs/${e}`);if(t.ok){let e=await t.json();i(e),("COMPLETED"===e.status||"FAILED"===e.status)&&(d(!1),"COMPLETED"===e.status&&setTimeout(s,2e3))}}catch(e){console.error("Failed to fetch job status:",e)}};t(),d(!1);let a=setInterval(t,2e3);return()=>clearInterval(a)},[e,s]),n||!t)return(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)(l.Z,{className:"w-8 h-8 text-primary mx-auto animate-spin mb-4"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Loading status..."})]});if("FAILED"===t.status)return(0,a.jsxs)(z.bZ,{className:"border-destructive/50 bg-destructive/10",children:[(0,a.jsx)(Z.Z,{className:"h-4 w-4 text-destructive"}),(0,a.jsxs)(z.X,{className:"text-destructive",children:["Processing failed: ",t.errorMessage||"Unknown error occurred"]})]});let o=D.findIndex(e=>e.key===t.currentStage);return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("h3",{className:"text-xl font-semibold text-foreground mb-2",children:"Processing Your Content"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"This usually takes 30-60 seconds"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"Overall Progress"}),(0,a.jsxs)("span",{className:"text-foreground font-semibold",children:[t.progress,"%"]})]}),(0,a.jsx)(S,{value:t.progress,className:"h-2.5"})]}),(0,a.jsx)("div",{className:"space-y-3",children:D.map((e,s)=>{let r=s===o,i=s<o||"COMPLETED"===t.status,l=e.icon;return(0,a.jsxs)(R.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.15*s},className:`
                flex items-center gap-4 p-4 rounded-xl border transition-smooth
                ${r?"bg-primary/10 border-primary/50 shadow-lg shadow-primary/10":i?"bg-green-500/10 border-green-500/50":"bg-muted/30 border-border"}
              `,children:[(0,a.jsx)("div",{className:`
                flex-shrink-0 w-12 h-12 rounded-xl flex items-center justify-center transition-smooth
                ${i?"bg-green-500/20 text-green-500":r?`${e.bgColor} ${e.color}`:"bg-muted text-muted-foreground"}
              `,children:i?(0,a.jsx)(R.E.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",stiffness:200},children:(0,a.jsx)(A.Z,{className:"w-6 h-6"})}):r?(0,a.jsx)(R.E.div,{animate:{rotate:360},transition:{duration:2,repeat:1/0,ease:"linear"},children:(0,a.jsx)(l,{className:"w-6 h-6"})}):(0,a.jsx)(l,{className:"w-6 h-6"})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("h4",{className:`font-semibold ${i?"text-green-500":r?"text-foreground":"text-muted-foreground"}`,children:e.label}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground truncate",children:i?"✓ Completed":e.description})]}),r&&(0,a.jsx)(R.E.div,{animate:{scale:[1,1.3,1],opacity:[.5,1,.5]},transition:{duration:1.5,repeat:1/0},className:"flex-shrink-0 w-2 h-2 bg-primary rounded-full"})]},e.key)})}),"COMPLETED"===t.status&&(0,a.jsx)(F.M,{children:(0,a.jsxs)(R.E.div,{initial:{opacity:0,scale:.95,y:10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95},className:"bg-green-500/10 border border-green-500/50 rounded-2xl p-6 text-center",children:[(0,a.jsx)(R.E.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",stiffness:200,delay:.1},children:(0,a.jsx)(A.Z,{className:"w-12 h-12 text-green-500 mx-auto mb-3"})}),(0,a.jsx)("p",{className:"text-green-500 font-semibold text-lg mb-1",children:"Content Ready!"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Your Instagram Reel is ready to download"})]})})]})}var M=t(4018);let V=M.fC,O=r.forwardRef(({className:e,...s},t)=>(0,a.jsx)(M.aV,{ref:t,className:(0,u.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...s}));O.displayName=M.aV.displayName;let P=r.forwardRef(({className:e,...s},t)=>(0,a.jsx)(M.xz,{ref:t,className:(0,u.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e),...s}));P.displayName=M.xz.displayName;let U=r.forwardRef(({className:e,...s},t)=>(0,a.jsx)(M.VY,{ref:t,className:(0,u.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...s}));U.displayName=M.VY.displayName;var $=t(6584),L=t(1471),B=t(5854),_=t(5162);let J=r.forwardRef(({className:e,...s},t)=>(0,a.jsxs)(_.fC,{ref:t,className:(0,u.cn)("relative flex w-full touch-none select-none items-center",e),...s,children:[(0,a.jsx)(_.fQ,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary",children:(0,a.jsx)(_.e6,{className:"absolute h-full bg-primary"})}),(0,a.jsx)(_.bU,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]}));J.displayName=_.fC.displayName;var G=t(6603),q=t(3157),Y=t(1990),H=t(2379),W=t(4385),Q=t(348),X=t(9353),K=t(9275),ee=t(3572),es=t(7248),et=t(966);let ea=K.fC,er=K.xz;K.ZA,K.Uv,K.Tr,K.Ee,r.forwardRef(({className:e,inset:s,children:t,...r},i)=>(0,a.jsxs)(K.fF,{ref:i,className:(0,u.cn)("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",s&&"pl-8",e),...r,children:[t,(0,a.jsx)(ee.Z,{className:"ml-auto h-4 w-4"})]})).displayName=K.fF.displayName,r.forwardRef(({className:e,...s},t)=>(0,a.jsx)(K.tu,{ref:t,className:(0,u.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...s})).displayName=K.tu.displayName;let ei=r.forwardRef(({className:e,sideOffset:s=4,...t},r)=>(0,a.jsx)(K.Uv,{children:(0,a.jsx)(K.VY,{ref:r,sideOffset:s,className:(0,u.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...t})}));ei.displayName=K.VY.displayName;let el=r.forwardRef(({className:e,inset:s,...t},r)=>(0,a.jsx)(K.ck,{ref:r,className:(0,u.cn)("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s&&"pl-8",e),...t}));function en({videoUrl:e,originalImageUrl:s,onFullscreenChange:t}){let[l,n]=(0,r.useState)(!1),[d,o]=(0,r.useState)(!1),[c,m]=(0,r.useState)(1),[u,x]=(0,r.useState)(0),[f,h]=(0,r.useState)(0),[p,g]=(0,r.useState)(1),[j,b]=(0,r.useState)(!1),[N,v]=(0,r.useState)(!0),[y,w]=(0,r.useState)({width:0,height:0}),[k,C]=(0,r.useState)(null),S=(0,r.useRef)(null),z=(0,r.useRef)(null),Z=(0,r.useRef)(null);(0,r.useEffect)(()=>{(async()=>{try{let s=(await fetch(e,{method:"HEAD"})).headers.get("Content-Length");s&&C(parseInt(s))}catch(e){console.error("Failed to fetch file size:",e)}})()},[e]),(0,r.useEffect)(()=>{let e=e=>{if(S.current)switch(e.key.toLowerCase()){case" ":case"k":e.preventDefault(),A();break;case"f":e.preventDefault(),D();break;case"m":e.preventDefault(),R();break;case"j":e.preventDefault(),S.current.currentTime=Math.max(0,S.current.currentTime-10);break;case"l":e.preventDefault(),S.current.currentTime=Math.min(f,S.current.currentTime+10);break;case"arrowleft":e.preventDefault(),S.current.currentTime=Math.max(0,S.current.currentTime-5);break;case"arrowright":e.preventDefault(),S.current.currentTime=Math.min(f,S.current.currentTime+5)}};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[f]),(0,r.useEffect)(()=>(z.current&&z.current.addEventListener("mousemove",()=>{v(!0),Z.current&&clearTimeout(Z.current),l&&j&&(Z.current=setTimeout(()=>{v(!1)},3e3))}),()=>{Z.current&&clearTimeout(Z.current)}),[l,j]);let A=()=>{S.current&&(l?S.current.pause():S.current.play(),n(!l))},R=()=>{S.current&&(S.current.muted=!d,o(!d))},F=e=>{S.current&&(S.current.playbackRate=e,g(e))},D=async()=>{if(z.current)try{j?(await document.exitFullscreen(),b(!1),t?.(!1)):(await z.current.requestFullscreen(),b(!0),t?.(!0))}catch(e){console.error("Fullscreen error:",e)}},I=e=>`${Math.floor(e/60)}:${Math.floor(e%60).toString().padStart(2,"0")}`;return(0,a.jsxs)("div",{ref:z,className:`relative bg-black rounded-fluid-lg overflow-hidden group ${j?"w-screen h-screen rounded-none":"aspect-[9/16] max-w-xs mx-auto"}`,children:[(0,a.jsx)("video",{ref:S,src:e,className:"w-full h-full object-contain",loop:!0,playsInline:!0,muted:d,onPlay:()=>n(!0),onPause:()=>n(!1),onTimeUpdate:e=>x(e.currentTarget.currentTime),onLoadedMetadata:e=>{h(e.currentTarget.duration),w({width:e.currentTarget.videoWidth,height:e.currentTarget.videoHeight})},onClick:A}),!l&&(0,a.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-black/30 backdrop-blur-sm transition-opacity",children:(0,a.jsx)(i.z,{size:"lg",onClick:A,className:"w-16 h-16 sm:w-20 sm:h-20 rounded-full bg-white/90 hover:bg-white shadow-2xl",children:(0,a.jsx)(E.Z,{className:"w-8 h-8 sm:w-10 sm:h-10 text-black fill-black ml-1"})})}),(0,a.jsxs)("div",{className:`absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black via-black/80 to-transparent p-2 sm:p-4 transition-opacity duration-300 ${N||!l?"opacity-100":"opacity-0"}`,children:[(0,a.jsxs)("div",{className:"mb-2 sm:mb-3",children:[(0,a.jsx)(J,{value:[u],max:f||100,step:.1,onValueChange:e=>{let s=e[0];S.current&&(S.current.currentTime=s,x(s))},className:"cursor-pointer"}),(0,a.jsxs)("div",{className:"flex justify-between text-fluid-xs text-white/70 mt-1",children:[(0,a.jsx)("span",{children:I(u)}),(0,a.jsx)("span",{children:I(f)})]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-1 sm:gap-2",children:[(0,a.jsx)(i.z,{size:"sm",variant:"ghost",onClick:A,className:"text-white hover:bg-white/20 h-8 w-8 sm:h-9 sm:w-9 p-0",children:l?(0,a.jsx)(G.Z,{className:"w-4 h-4 sm:w-5 sm:h-5"}):(0,a.jsx)(E.Z,{className:"w-4 h-4 sm:w-5 sm:h-5"})}),(0,a.jsx)(i.z,{size:"sm",variant:"ghost",onClick:()=>S.current&&(S.current.currentTime-=10),className:"text-white hover:bg-white/20 h-8 w-8 sm:h-9 sm:w-9 p-0 hidden xs:flex",children:(0,a.jsx)(q.Z,{className:"w-4 h-4 sm:w-5 sm:h-5"})}),(0,a.jsx)(i.z,{size:"sm",variant:"ghost",onClick:()=>S.current&&(S.current.currentTime+=10),className:"text-white hover:bg-white/20 h-8 w-8 sm:h-9 sm:w-9 p-0 hidden xs:flex",children:(0,a.jsx)(Y.Z,{className:"w-4 h-4 sm:w-5 sm:h-5"})}),(0,a.jsxs)("div",{className:"flex items-center gap-1 sm:gap-2",children:[(0,a.jsx)(i.z,{size:"sm",variant:"ghost",onClick:R,className:"text-white hover:bg-white/20 h-8 w-8 sm:h-9 sm:w-9 p-0",children:d?(0,a.jsx)(H.Z,{className:"w-4 h-4 sm:w-5 sm:h-5"}):(0,a.jsx)(W.Z,{className:"w-4 h-4 sm:w-5 sm:h-5"})}),(0,a.jsx)("div",{className:"w-16 sm:w-20 hidden md:block",children:(0,a.jsx)(J,{value:[c],max:1,step:.1,onValueChange:e=>{let s=e[0];S.current&&(S.current.volume=s,m(s),o(0===s))},className:"cursor-pointer"})})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-1 sm:gap-2",children:[(0,a.jsxs)(ea,{children:[(0,a.jsx)(er,{asChild:!0,children:(0,a.jsxs)(i.z,{size:"sm",variant:"ghost",className:"text-white hover:bg-white/20 h-8 sm:h-9 px-2 sm:px-3 hidden xs:flex",children:[(0,a.jsx)(T.Z,{className:"w-4 h-4 sm:w-5 sm:h-5"}),(0,a.jsxs)("span",{className:"ml-1 text-fluid-xs",children:[p,"x"]})]})}),(0,a.jsx)(ei,{children:[.5,.75,1,1.25,1.5,2].map(e=>(0,a.jsxs)(el,{onClick:()=>F(e),className:p===e?"bg-primary/20":"",children:[e,"x ",1===e&&"(Normal)"]},e))})]}),(0,a.jsx)(i.z,{size:"sm",variant:"ghost",onClick:D,className:"text-white hover:bg-white/20 h-8 w-8 sm:h-9 sm:w-9 p-0",children:j?(0,a.jsx)(Q.Z,{className:"w-4 h-4 sm:w-5 sm:h-5"}):(0,a.jsx)(X.Z,{className:"w-4 h-4 sm:w-5 sm:h-5"})})]})]})]}),(0,a.jsxs)("div",{className:"absolute top-2 sm:top-4 left-2 sm:left-4 right-2 sm:right-4 flex justify-between items-start opacity-0 group-hover:opacity-100 transition-opacity gap-2",children:[(0,a.jsxs)("div",{className:"bg-black/70 backdrop-blur-sm text-white text-fluid-xs px-2 py-1 sm:px-3 sm:py-1.5 rounded-full",children:[(0,a.jsxs)("span",{className:"hidden sm:inline",children:[y.width," \xd7 ",y.height]}),(0,a.jsxs)("span",{className:"sm:hidden",children:[y.width,"\xd7",y.height]}),k&&(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("span",{className:"hidden sm:inline",children:[" • ",k<1024?k+" B":k<1048576?(k/1024).toFixed(2)+" KB":(k/1048576).toFixed(2)+" MB"]})})]}),(0,a.jsxs)("div",{className:"bg-gradient-to-r from-primary to-secondary text-white text-fluid-xs font-semibold px-2 py-1 sm:px-3 sm:py-1.5 rounded-full shadow-lg",children:[(0,a.jsx)("span",{className:"hidden sm:inline",children:"Instagram Ready"}),(0,a.jsx)("span",{className:"sm:hidden",children:"IG ✓"})]})]}),!j&&(0,a.jsx)("div",{className:"absolute top-4 left-4 opacity-0 group-hover:opacity-100 transition-opacity hidden md:block",children:(0,a.jsxs)("div",{className:"bg-black/70 backdrop-blur-sm text-white text-xs px-3 py-2 rounded-lg",children:[(0,a.jsx)("p",{className:"font-semibold mb-1",children:"Raccourcis:"}),(0,a.jsx)("p",{children:"Space: Play/Pause"}),(0,a.jsx)("p",{children:"F: Plein \xe9cran"}),(0,a.jsx)("p",{children:"M: Muet"}),(0,a.jsx)("p",{children:"J/L: -10s/+10s"})]})})]})}el.displayName=K.ck.displayName,r.forwardRef(({className:e,children:s,checked:t,...r},i)=>(0,a.jsxs)(K.oC,{ref:i,className:(0,u.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),checked:t,...r,children:[(0,a.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(K.wU,{children:(0,a.jsx)(es.Z,{className:"h-4 w-4"})})}),s]})).displayName=K.oC.displayName,r.forwardRef(({className:e,children:s,...t},r)=>(0,a.jsxs)(K.Rk,{ref:r,className:(0,u.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...t,children:[(0,a.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(K.wU,{children:(0,a.jsx)(et.Z,{className:"h-2 w-2 fill-current"})})}),s]})).displayName=K.Rk.displayName,r.forwardRef(({className:e,inset:s,...t},r)=>(0,a.jsx)(K.__,{ref:r,className:(0,u.cn)("px-2 py-1.5 text-sm font-semibold",s&&"pl-8",e),...t})).displayName=K.__.displayName,r.forwardRef(({className:e,...s},t)=>(0,a.jsx)(K.Z0,{ref:t,className:(0,u.cn)("-mx-1 my-1 h-px bg-muted",e),...s})).displayName=K.Z0.displayName;var ed=t(8001);function eo({beforeImage:e,afterVideoUrl:s}){let[t,i]=(0,r.useState)(50);return(0,a.jsxs)("div",{className:"space-y-fluid-sm",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("h3",{className:"text-fluid-lg font-bold text-foreground mb-fluid-xs leading-fluid-tight",children:"Comparaison Avant / Apr\xe8s"}),(0,a.jsx)("p",{className:"text-fluid-sm text-muted-foreground leading-fluid-normal",children:"Faites glisser le curseur pour comparer"})]}),(0,a.jsxs)("div",{className:"relative aspect-[9/16] max-w-xs mx-auto bg-black rounded-fluid-lg overflow-hidden",children:[(0,a.jsxs)("div",{className:"absolute inset-0",children:[(0,a.jsx)("div",{className:"relative w-full h-full",children:(0,a.jsx)(ed.default,{src:e,alt:"Image originale",fill:!0,className:"object-cover"})}),(0,a.jsx)("div",{className:"absolute bottom-2 left-2 sm:bottom-4 sm:left-4 bg-black/70 backdrop-blur-sm text-white text-fluid-xs font-semibold px-2 py-1 sm:px-3 sm:py-1.5 rounded-full",children:"AVANT"})]}),(0,a.jsxs)("div",{className:"absolute inset-0",style:{clipPath:`inset(0 ${100-t}% 0 0)`},children:[(0,a.jsx)("video",{src:s,className:"w-full h-full object-cover",autoPlay:!0,loop:!0,muted:!0,playsInline:!0}),(0,a.jsx)("div",{className:"absolute bottom-2 right-2 sm:bottom-4 sm:right-4 bg-black/70 backdrop-blur-sm text-white text-fluid-xs font-semibold px-2 py-1 sm:px-3 sm:py-1.5 rounded-full",children:"APR\xc8S"})]}),(0,a.jsx)("div",{className:"absolute top-0 bottom-0 w-0.5 sm:w-1 bg-white shadow-lg z-10",style:{left:`${t}%`},children:(0,a.jsx)("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-6 h-6 sm:w-8 sm:h-8 bg-white rounded-full shadow-xl flex items-center justify-center",children:(0,a.jsxs)("div",{className:"flex space-x-0.5 sm:space-x-1",children:[(0,a.jsx)("div",{className:"w-0.5 h-3 sm:h-4 bg-gray-400"}),(0,a.jsx)("div",{className:"w-0.5 h-3 sm:h-4 bg-gray-400"})]})})})]}),(0,a.jsx)("div",{className:"max-w-xs mx-auto px-fluid-sm",children:(0,a.jsx)(J,{value:[t],max:100,step:1,onValueChange:e=>i(e[0]),className:"cursor-pointer"})}),(0,a.jsx)("div",{className:"max-w-xs mx-auto text-center",children:(0,a.jsx)("p",{className:"text-fluid-xs text-muted-foreground leading-fluid-normal",children:"\uD83D\uDCA1 Glissez le curseur ou utilisez le slider ci-dessus"})})]})}var ec=t(9582);function em({jobId:e,variations:s,onVariationSelect:t,onRegenerateVariations:n,regenerating:d}){let[o,c]=(0,r.useState)(s[0]?.id||null),[m,u]=(0,r.useState)(new Set(s.filter(e=>e.isFavorite).map(e=>e.id))),[x,f]=(0,r.useState)(null),{toast:h}=(0,B.pm)(),p=async(s,t)=>{t.stopPropagation();let a=new Set(m);a.has(s)?a.delete(s):a.add(s),u(a);try{await fetch(`/api/jobs/${e}/variations/${s}/favorite`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({isFavorite:a.has(s)})})}catch(e){console.error("Failed to update favorite:",e)}},g=async(e,s,t)=>{t.stopPropagation(),f(e);try{let t=await fetch(s);if(t.ok){let s=await t.blob(),a=window.URL.createObjectURL(s),r=document.createElement("a");r.href=a,r.download=`variation-${e.slice(0,8)}-${Date.now()}.mp4`,document.body.appendChild(r),r.click(),window.URL.revokeObjectURL(a),document.body.removeChild(r),h({title:"T\xe9l\xe9chargement d\xe9marr\xe9",description:"La variation est en cours de t\xe9l\xe9chargement."})}}catch(e){h({title:"\xc9chec du t\xe9l\xe9chargement",description:"Impossible de t\xe9l\xe9charger la variation.",variant:"destructive"})}finally{f(null)}},j=e=>{c(e),t(e)};return(0,a.jsxs)("div",{className:"space-y-fluid-md",children:[(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-fluid-sm",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("h3",{className:"text-fluid-lg font-bold text-foreground leading-fluid-tight",children:["Variations (",s.length,")"]}),(0,a.jsx)("p",{className:"text-fluid-sm text-muted-foreground mt-fluid-xs leading-fluid-normal",children:"Cliquez pour lire, s\xe9lectionnez votre pr\xe9f\xe9r\xe9e"})]}),(0,a.jsx)(i.z,{onClick:n,disabled:d,variant:"outline",className:"border-primary/50 hover:bg-primary/10 w-full sm:w-auto",children:d?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(l.Z,{className:"w-4 h-4 mr-2 animate-spin"}),(0,a.jsx)("span",{className:"text-fluid-sm",children:"G\xe9n\xe9ration..."})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(L.Z,{className:"w-4 h-4 mr-2"}),(0,a.jsx)("span",{className:"text-fluid-sm",children:"R\xe9g\xe9n\xe9rer"})]})})]}),(0,a.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-fluid-xs sm:gap-fluid-sm",children:(0,a.jsx)(F.M,{mode:"popLayout",children:s.map((e,s)=>(0,a.jsxs)(R.E.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},transition:{delay:.05*s},className:`relative group cursor-pointer rounded-fluid-md overflow-hidden border-2 transition-all ${o===e.id?"border-primary shadow-lg shadow-primary/20":"border-border hover:border-primary/50"}`,onClick:()=>j(e.id),children:[(0,a.jsxs)("div",{className:"aspect-[9/16] bg-black relative",children:[(0,a.jsx)("video",{src:e.videoUrl,className:"w-full h-full object-cover",loop:!0,muted:!0,playsInline:!0,onClick:e=>{e.stopPropagation(),e.currentTarget.paused?e.currentTarget.play():e.currentTarget.pause()},onMouseEnter:e=>{window.innerWidth>=768&&e.currentTarget.play()},onMouseLeave:e=>{window.innerWidth>=768&&(e.currentTarget.pause(),e.currentTarget.currentTime=0)}}),o===e.id&&(0,a.jsx)("div",{className:"absolute top-1.5 left-1.5 sm:top-2 sm:left-2 bg-primary text-primary-foreground text-fluid-xs font-semibold px-1.5 py-0.5 sm:px-2 sm:py-1 rounded-full",children:"S\xe9lectionn\xe9e"}),(0,a.jsx)("div",{className:"absolute inset-0 bg-black/30 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center pointer-events-none",children:(0,a.jsx)(E.Z,{className:"w-6 h-6 sm:w-8 sm:h-8 text-white fill-white"})}),(0,a.jsxs)("div",{className:"absolute bottom-1.5 left-1.5 right-1.5 sm:bottom-2 sm:left-2 sm:right-2 flex items-center justify-between opacity-0 group-hover:opacity-100 transition-opacity gap-1",children:[(0,a.jsx)(i.z,{size:"sm",variant:"ghost",onClick:s=>p(e.id,s),className:`bg-black/70 backdrop-blur-sm hover:bg-black/90 h-7 w-7 sm:h-8 sm:w-8 p-0 ${m.has(e.id)?"text-yellow-400":"text-white"}`,children:(0,a.jsx)(ec.Z,{className:`w-3 h-3 sm:w-4 sm:h-4 ${m.has(e.id)?"fill-yellow-400":""}`})}),(0,a.jsx)(i.z,{size:"sm",variant:"ghost",onClick:s=>g(e.id,e.videoUrl,s),disabled:x===e.id,className:"bg-black/70 backdrop-blur-sm text-white hover:bg-black/90 h-7 w-7 sm:h-8 sm:w-8 p-0",children:x===e.id?(0,a.jsx)(l.Z,{className:"w-3 h-3 sm:w-4 sm:h-4 animate-spin"}):(0,a.jsx)($.Z,{className:"w-3 h-3 sm:w-4 sm:h-4"})})]})]}),(0,a.jsxs)("div",{className:"absolute top-1.5 right-1.5 sm:top-2 sm:right-2 bg-black/70 backdrop-blur-sm text-white text-fluid-xs font-semibold px-1.5 py-0.5 sm:px-2 sm:py-1 rounded-full",children:["#",s+1]})]},e.id))})}),(0,a.jsx)("div",{className:"glass rounded-fluid-md p-fluid-sm border border-border",children:(0,a.jsxs)("p",{className:"text-fluid-xs text-muted-foreground leading-fluid-normal text-center",children:["\uD83D\uDCA1 ",(0,a.jsx)("span",{className:"hidden sm:inline",children:"Survolez une variation pour la pr\xe9visualiser. "}),"Cliquez",(0,a.jsx)("span",{className:"hidden sm:inline",children:" sur une vid\xe9o"})," pour la lire en plein \xe9cran dans l'onglet Lecteur"]})}),m.size>0&&(0,a.jsxs)("div",{className:"flex items-center justify-center gap-fluid-xs glass rounded-fluid-md p-fluid-xs border border-border",children:[(0,a.jsx)(ec.Z,{className:"w-4 h-4 text-yellow-400 fill-yellow-400"}),(0,a.jsxs)("span",{className:"text-fluid-sm text-muted-foreground",children:[m.size," favori",m.size>1?"s":""]})]})]})}function eu({jobId:e}){let[s,t]=(0,r.useState)(null),[d,o]=(0,r.useState)([]),[c,m]=(0,r.useState)(!0),[u,x]=(0,r.useState)(!1),[f,h]=(0,r.useState)(!1),[p,g]=(0,r.useState)(!1),[j,b]=(0,r.useState)(null),{toast:N}=(0,B.pm)();(0,r.useEffect)(()=>{v(),w();let e=setInterval(()=>{s?.status!=="COMPLETED"&&s?.status!=="FAILED"&&v()},3e3);return()=>clearInterval(e)},[e]);let v=async()=>{try{let s=await fetch(`/api/jobs/${e}`);if(s.ok){let e=await s.json();t(e)}}catch(e){console.error("Failed to fetch job data:",e)}finally{m(!1)}},w=async()=>{try{let s=await fetch(`/api/jobs/${e}/variations`);if(s.ok){let e=await s.json();o(e)}}catch(e){console.error("Failed to fetch variations:",e)}},k=async()=>{h(!0);try{let s=await fetch(`/api/jobs/${e}/regenerate`,{method:"POST"});if(s.ok)await s.json(),N({title:"R\xe9g\xe9n\xe9ration r\xe9ussie !",description:"Une nouvelle variation a \xe9t\xe9 cr\xe9\xe9e."}),w();else throw Error("Regeneration failed")}catch(e){N({title:"\xc9chec de la r\xe9g\xe9n\xe9ration",description:"Impossible de r\xe9g\xe9n\xe9rer la vid\xe9o. Veuillez r\xe9essayer.",variant:"destructive"})}finally{h(!1)}},C=async()=>{g(!0);try{let s=await fetch(`/api/jobs/${e}/generate-variations`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({count:3})});if(s.ok){let e=await s.json();N({title:"Variations cr\xe9\xe9es !",description:`${e.count} nouvelles variations ont \xe9t\xe9 g\xe9n\xe9r\xe9es.`}),w()}else throw Error("Variation generation failed")}catch(e){N({title:"\xc9chec de la g\xe9n\xe9ration",description:"Impossible de g\xe9n\xe9rer les variations. Veuillez r\xe9essayer.",variant:"destructive"})}finally{g(!1)}},S=async()=>{if(s?.finalVideoUrl){x(!0);try{let s=await fetch(`/api/download/${e}`);if(s.ok){let e=await s.blob(),t=window.URL.createObjectURL(e),a=document.createElement("a");a.href=t,a.download=`instagram-reel-${Date.now()}.mp4`,document.body.appendChild(a),a.click(),window.URL.revokeObjectURL(t),document.body.removeChild(a),N({title:"T\xe9l\xe9chargement d\xe9marr\xe9",description:"Votre Instagram Reel est en cours de t\xe9l\xe9chargement."})}else throw Error("Download failed")}catch(e){N({title:"\xc9chec du t\xe9l\xe9chargement",description:"Impossible de t\xe9l\xe9charger la vid\xe9o. Veuillez r\xe9essayer.",variant:"destructive"})}finally{x(!1)}}};if(c)return(0,a.jsx)("div",{className:"aspect-[9/16] max-w-xs mx-auto bg-muted/30 rounded-2xl flex items-center justify-center",children:(0,a.jsx)(l.Z,{className:"w-8 h-8 text-primary animate-spin"})});if(!s||"FAILED"===s.status)return(0,a.jsx)(z.bZ,{className:"border-destructive/50 bg-destructive/10",children:(0,a.jsx)(z.X,{className:"text-destructive",children:"Impossible de charger la pr\xe9visualisation. Veuillez cr\xe9er un nouveau contenu."})});if("COMPLETED"!==s.status||!s.finalVideoUrl)return(0,a.jsx)("div",{className:"aspect-[9/16] max-w-xs mx-auto bg-gradient-to-br from-primary/20 to-secondary/20 rounded-2xl border-2 border-dashed border-border flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(l.Z,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4 animate-spin"}),(0,a.jsxs)("p",{className:"text-muted-foreground",children:["Traitement... ",s.progress,"%"]})]})});let E=j?d.find(e=>e.id===j)?.videoUrl:s.finalVideoUrl;return(0,a.jsx)("div",{className:"space-y-fluid-md",children:(0,a.jsxs)(V,{defaultValue:"player",className:"w-full",children:[(0,a.jsxs)(O,{className:"grid w-full grid-cols-3 glass",children:[(0,a.jsx)(P,{value:"player",className:"text-fluid-xs sm:text-fluid-sm",children:"Lecteur"}),(0,a.jsx)(P,{value:"compare",className:"text-fluid-xs sm:text-fluid-sm",children:"Comparer"}),(0,a.jsxs)(P,{value:"variations",className:"text-fluid-xs sm:text-fluid-sm",children:[(0,a.jsx)("span",{className:"hidden sm:inline",children:"Variations"}),(0,a.jsx)("span",{className:"sm:hidden",children:"Var."})," (",d.length,")"]})]}),(0,a.jsxs)(U,{value:"player",className:"space-y-fluid-md",children:[E&&(0,a.jsx)(en,{videoUrl:E,originalImageUrl:s.originalImageUrl}),(0,a.jsxs)("div",{className:"flex flex-col gap-fluid-sm",children:[(0,a.jsx)(i.z,{onClick:S,disabled:u,size:"default",className:"w-full bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 text-white shadow-lg shadow-green-500/20 hover:shadow-green-500/30 transition-all duration-300 font-medium text-fluid-sm h-10 sm:h-11",children:u?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(l.Z,{className:"w-4 h-4 mr-2 animate-spin"}),(0,a.jsx)("span",{className:"text-fluid-sm",children:"T\xe9l\xe9chargement..."})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)($.Z,{className:"w-4 h-4 mr-2"}),(0,a.jsx)("span",{className:"text-fluid-sm",children:"T\xe9l\xe9charger"})]})}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-fluid-xs",children:[(0,a.jsx)(i.z,{onClick:k,disabled:f,variant:"outline",size:"default",className:"border-2 border-primary/30 hover:border-primary hover:bg-primary/5 transition-all duration-200 h-10 sm:h-11",children:f?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(l.Z,{className:"w-4 h-4 mr-1.5 animate-spin"}),(0,a.jsx)("span",{className:"text-fluid-xs sm:text-fluid-sm",children:"G\xe9n\xe9ration..."})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(L.Z,{className:"w-4 h-4 mr-1.5"}),(0,a.jsx)("span",{className:"text-fluid-xs sm:text-fluid-sm",children:"R\xe9g\xe9n\xe9rer"})]})}),(0,a.jsx)(i.z,{onClick:C,disabled:p,variant:"outline",size:"default",className:"border-2 border-secondary/30 hover:border-secondary hover:bg-secondary/5 transition-all duration-200 h-10 sm:h-11",children:p?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(l.Z,{className:"w-4 h-4 mr-1.5 animate-spin"}),(0,a.jsx)("span",{className:"text-fluid-xs sm:text-fluid-sm",children:"G\xe9n\xe9ration..."})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(y.Z,{className:"w-4 h-4 mr-1.5"}),(0,a.jsx)("span",{className:"text-fluid-xs sm:text-fluid-sm",children:"3 Variations"})]})})]})]})]}),(0,a.jsx)(U,{value:"compare",children:s.originalImageUrl&&E&&(0,a.jsx)(eo,{beforeImage:s.originalImageUrl,afterVideoUrl:E})}),(0,a.jsx)(U,{value:"variations",children:d.length>0?(0,a.jsx)(em,{jobId:e,variations:d,onVariationSelect:b,onRegenerateVariations:C,regenerating:p}):(0,a.jsxs)("div",{className:"text-center py-fluid-lg space-y-fluid-sm",children:[(0,a.jsx)(n.Z,{className:"w-12 h-12 sm:w-16 sm:h-16 text-muted-foreground mx-auto"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-fluid-lg font-semibold text-foreground leading-fluid-tight",children:"Aucune variation"}),(0,a.jsx)("p",{className:"text-fluid-sm text-muted-foreground mt-fluid-xs leading-fluid-normal",children:"G\xe9n\xe9rez des variations pour explorer diff\xe9rentes versions"})]}),(0,a.jsx)(i.z,{onClick:C,disabled:p,size:"lg",className:"mt-fluid-sm",children:p?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(l.Z,{className:"w-5 h-5 mr-2 animate-spin"}),(0,a.jsx)("span",{className:"text-fluid-sm",children:"G\xe9n\xe9ration..."})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(y.Z,{className:"w-5 h-5 mr-2"}),(0,a.jsx)("span",{className:"text-fluid-sm",children:"G\xe9n\xe9rer 3 Variations"})]})})]})})]})})}let ex=(0,t(2371).j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function ef({className:e,variant:s,...t}){return(0,a.jsx)("div",{className:(0,u.cn)(ex({variant:s}),e),...t})}var eh=t(2492),ep=t(8082),eg=t(563),ej=t(6264),eb=t(1213);function eN({onJobSelect:e}){let[s,t]=(0,r.useState)([]),[n,d]=(0,r.useState)(!0),[o,c]=(0,r.useState)(null),{toast:m}=(0,B.pm)();(0,r.useEffect)(()=>{u()},[]);let u=async()=>{try{let e=await fetch("/api/jobs");if(e.ok){let s=await e.json();t(s)}}catch(e){console.error("Failed to fetch jobs:",e)}finally{d(!1)}},x=async(e,s)=>{s.stopPropagation(),c(e);try{let s=await fetch(`/api/download/${e}`);if(s.ok){let t=await s.blob(),a=window.URL.createObjectURL(t),r=document.createElement("a");r.href=a,r.download=`instagram-reel-${e.slice(0,8)}-${Date.now()}.mp4`,document.body.appendChild(r),r.click(),window.URL.revokeObjectURL(a),document.body.removeChild(r),m({title:"T\xe9l\xe9chargement d\xe9marr\xe9",description:"Votre vid\xe9o Instagram Reel est en cours de t\xe9l\xe9chargement."})}else throw Error("Download failed")}catch(e){m({title:"\xc9chec du t\xe9l\xe9chargement",description:"Impossible de t\xe9l\xe9charger la vid\xe9o. Veuillez r\xe9essayer.",variant:"destructive"})}finally{c(null)}},f=async(e,a)=>{if(a.stopPropagation(),confirm("\xcates-vous s\xfbr de vouloir supprimer ce job ?"))try{(await fetch(`/api/jobs/${e}`,{method:"DELETE"})).ok&&(t(s.filter(s=>s.id!==e)),m({title:"Job supprim\xe9",description:"Le job a \xe9t\xe9 supprim\xe9 avec succ\xe8s."}))}catch(e){console.error("Failed to delete job:",e),m({title:"Erreur",description:"Impossible de supprimer le job.",variant:"destructive"})}},h=e=>{switch(e){case"COMPLETED":return(0,a.jsx)(A.Z,{className:"w-4 h-4 text-green-400"});case"FAILED":return(0,a.jsx)(Z.Z,{className:"w-4 h-4 text-red-400"});case"PROCESSING":return(0,a.jsx)(eh.Z,{className:"w-4 h-4 text-yellow-400"});default:return(0,a.jsx)(eh.Z,{className:"w-4 h-4 text-gray-400"})}},p=e=>{switch(e){case"COMPLETED":return"bg-green-500/20 text-green-400 border-green-500/50";case"FAILED":return"bg-red-500/20 text-red-400 border-red-500/50";case"PROCESSING":return"bg-yellow-500/20 text-yellow-400 border-yellow-500/50";default:return"bg-gray-500/20 text-gray-400 border-gray-500/50"}};return n?(0,a.jsx)("div",{className:"text-center py-8",children:(0,a.jsx)("p",{className:"text-gray-400",children:"Loading your content history..."})}):0===s.length?(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)(E.Z,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),(0,a.jsx)("h3",{className:"text-xl font-semibold text-white mb-2",children:"No Content Yet"}),(0,a.jsx)("p",{className:"text-gray-400",children:"Start creating your first Instagram Reel to see your content history here."})]}):(0,a.jsxs)("div",{className:"space-y-fluid-md",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-fluid-xl font-bold text-foreground mb-fluid-xs leading-fluid-tight",children:"Historique"}),(0,a.jsx)("p",{className:"text-fluid-sm text-muted-foreground leading-fluid-normal",children:"Visualisez et g\xe9rez vos Reels Instagram g\xe9n\xe9r\xe9s"})]}),(0,a.jsx)("div",{className:"grid gap-fluid-sm",children:s.map(s=>(0,a.jsx)("div",{className:"glass border border-border rounded-fluid-lg p-fluid-sm hover:bg-muted/5 transition-all cursor-pointer group",onClick:()=>e(s.id),children:(0,a.jsxs)("div",{className:"flex items-start gap-fluid-sm",children:[(0,a.jsxs)("div",{className:"w-12 h-12 sm:w-16 sm:h-16 bg-gradient-to-br from-primary/20 to-secondary/20 rounded-fluid-md flex-shrink-0 overflow-hidden relative",children:[s.originalImageUrl?(0,a.jsx)("img",{src:s.originalImageUrl,alt:"Aper\xe7u",className:"w-full h-full object-cover"}):(0,a.jsx)("div",{className:"w-full h-full flex items-center justify-center",children:(0,a.jsx)(E.Z,{className:"w-4 h-4 sm:w-6 sm:h-6 text-muted-foreground"})}),"COMPLETED"===s.status&&s.finalVideoUrl&&(0,a.jsx)("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/30 transition-colors flex items-center justify-center",children:(0,a.jsx)(E.Z,{className:"w-5 h-5 sm:w-6 sm:h-6 text-white opacity-0 group-hover:opacity-100 transition-opacity fill-white"})})]}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsxs)("div",{className:"flex flex-wrap items-center gap-fluid-xs mb-fluid-xs",children:[h(s.status),(0,a.jsx)(ef,{variant:"outline",className:`text-fluid-xs ${p(s.status)}`,children:s.status}),"PROCESSING"===s.status&&(0,a.jsxs)("span",{className:"text-fluid-xs text-muted-foreground hidden sm:inline",children:[s.progress,"% • ",s.currentStage]})]}),(0,a.jsxs)("p",{className:"text-fluid-sm text-foreground/80 mb-fluid-xs leading-fluid-tight",children:["Cr\xe9\xe9 ",(0,ej.Q)(new Date(s.createdAt),{addSuffix:!0,locale:eb.fr})]}),(0,a.jsxs)("div",{className:"flex flex-wrap items-center gap-fluid-xs text-fluid-xs text-muted-foreground",children:[s.completedAt&&(0,a.jsxs)("span",{className:"hidden sm:inline",children:["Termin\xe9 ",(0,ej.Q)(new Date(s.completedAt),{addSuffix:!0,locale:eb.fr})]}),s.cost&&s.cost>0&&(0,a.jsxs)(a.Fragment,{children:[s.completedAt&&(0,a.jsx)("span",{className:"hidden sm:inline",children:"•"}),(0,a.jsxs)("span",{className:"text-green-500 font-semibold",children:["€",s.cost.toFixed(3)]})]})]})]}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row items-end sm:items-center gap-1 sm:gap-fluid-xs flex-shrink-0",children:["COMPLETED"===s.status&&s.finalVideoUrl&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(i.z,{size:"sm",variant:"ghost",onClick:t=>{t.stopPropagation(),e(s.id)},className:"text-primary hover:text-primary hover:bg-primary/10 h-8 w-8 sm:h-9 sm:w-9 p-0",title:"Voir la vid\xe9o",children:(0,a.jsx)(ep.Z,{className:"w-4 h-4"})}),(0,a.jsx)(i.z,{size:"sm",variant:"ghost",onClick:e=>x(s.id,e),disabled:o===s.id,className:"text-green-500 hover:text-green-400 hover:bg-green-500/10 h-8 w-8 sm:h-9 sm:w-9 p-0",title:"T\xe9l\xe9charger",children:o===s.id?(0,a.jsx)(l.Z,{className:"w-4 h-4 animate-spin"}):(0,a.jsx)($.Z,{className:"w-4 h-4"})})]}),(0,a.jsx)(i.z,{size:"sm",variant:"ghost",onClick:e=>f(s.id,e),className:"text-destructive hover:text-destructive hover:bg-destructive/10 h-8 w-8 sm:h-9 sm:w-9 p-0",title:"Supprimer",children:(0,a.jsx)(eg.Z,{className:"w-4 h-4"})})]})]})},s.id))})]})}var ev=t(5020),ey=t(1410),ew=t(4693),ek=t(9484),eC=t(5762);let eS=[{id:"create",label:"Create",icon:ev.Z},{id:"history",label:"History",icon:ey.Z},{id:"settings",label:"Settings",icon:T.Z},{id:"profile",label:"Profile",icon:ew.Z}],ez={id:"admin",label:"Admin",icon:ek.Z};function eE({activeTab:e,onTabChange:s}){let{data:t}=(0,eC.useSession)()||{},r=t?.user?.role==="ADMIN",i=r?[...eS,ez]:eS;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("nav",{className:"md:hidden fixed bottom-0 left-0 right-0 z-50 glass border-t border-white/10 pb-safe",children:(0,a.jsx)("div",{className:(0,u.cn)("grid",r?"grid-cols-5":"grid-cols-4"),style:{height:"clamp(3.5rem, 4vw + 3rem, 4.5rem)"},children:i.map(t=>{let r=t.icon,i=e===t.id;return(0,a.jsxs)("button",{onClick:()=>s(t.id),className:(0,u.cn)("relative flex flex-col items-center justify-center gap-fluid-xs transition-smooth","touch-manipulation min-h-[44px] min-w-[44px]",i?"text-primary":"text-muted-foreground hover:text-foreground"),"aria-label":t.label,"aria-current":i?"page":void 0,children:[i&&(0,a.jsx)(R.E.div,{layoutId:"activeTab",className:"absolute inset-0 bg-primary/10 rounded-fluid-md",initial:!1,transition:{type:"spring",stiffness:500,damping:30}}),(0,a.jsx)(R.E.div,{animate:{scale:i?1.1:1,y:i?-2:0},transition:{type:"spring",stiffness:400,damping:17},className:"relative z-10",children:(0,a.jsx)(r,{style:{width:"clamp(1.125rem, 1vw + 1rem, 1.375rem)",height:"clamp(1.125rem, 1vw + 1rem, 1.375rem)"}})}),(0,a.jsx)("span",{className:(0,u.cn)("relative z-10 text-fluid-xs font-medium transition-smooth leading-fluid-tight",i&&"font-semibold"),children:t.label}),i&&(0,a.jsx)(R.E.div,{layoutId:"activeDot",className:"absolute top-1 w-1 h-1 bg-primary rounded-full",initial:!1,transition:{type:"spring",stiffness:500,damping:30}})]},t.id)})})}),(0,a.jsx)("nav",{className:"hidden md:flex fixed z-50 flex-col gap-fluid-sm glass rounded-fluid-lg p-fluid-sm",style:{left:"clamp(0.5rem, 1vw, 1.5rem)",top:"50%",transform:"translateY(-50%)"},children:i.map(t=>{let r=t.icon,i=e===t.id;return(0,a.jsxs)("button",{onClick:()=>s(t.id),className:(0,u.cn)("relative flex items-center justify-center rounded-fluid-md transition-smooth","min-h-[44px] min-w-[44px]",i?"bg-primary text-primary-foreground shadow-lg shadow-primary/30":"text-muted-foreground hover:text-foreground hover:bg-muted"),style:{width:"clamp(2.75rem, 3vw + 2rem, 3.5rem)",height:"clamp(2.75rem, 3vw + 2rem, 3.5rem)"},"aria-label":t.label,"aria-current":i?"page":void 0,title:t.label,children:[(0,a.jsx)(r,{style:{width:"clamp(1.125rem, 1.2vw + 0.8rem, 1.5rem)",height:"clamp(1.125rem, 1.2vw + 0.8rem, 1.5rem)"}}),(0,a.jsx)("div",{className:(0,u.cn)("absolute left-full ml-fluid-sm px-fluid-sm py-fluid-xs bg-card border border-border rounded-fluid-md","text-fluid-sm font-medium whitespace-nowrap pointer-events-none","opacity-0 group-hover:opacity-100 transition-opacity"),children:t.label})]},t.id)})})]})}let eT=r.forwardRef(({className:e,...s},t)=>(0,a.jsx)("div",{ref:t,className:(0,u.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...s}));eT.displayName="Card";let eZ=r.forwardRef(({className:e,...s},t)=>(0,a.jsx)("div",{ref:t,className:(0,u.cn)("flex flex-col space-y-1.5 p-6",e),...s}));eZ.displayName="CardHeader";let eA=r.forwardRef(({className:e,...s},t)=>(0,a.jsx)("h3",{ref:t,className:(0,u.cn)("text-2xl font-semibold leading-none tracking-tight",e),...s}));eA.displayName="CardTitle";let eR=r.forwardRef(({className:e,...s},t)=>(0,a.jsx)("p",{ref:t,className:(0,u.cn)("text-sm text-muted-foreground",e),...s}));eR.displayName="CardDescription";let eF=r.forwardRef(({className:e,...s},t)=>(0,a.jsx)("div",{ref:t,className:(0,u.cn)("p-6 pt-0",e),...s}));eF.displayName="CardContent",r.forwardRef(({className:e,...s},t)=>(0,a.jsx)("div",{ref:t,className:(0,u.cn)("flex items-center p-6 pt-0",e),...s})).displayName="CardFooter";var eD=t(4635),eI=t(4678),eM=t(892),eV=t(3648),eO=t(3394),eP=t(8382),eU=t(7480),e$=t(1844),eL=t(3751),eB=t(6997);let e_=e$.fC;e$.ZA;let eJ=e$.B4,eG=r.forwardRef(({className:e,children:s,...t},r)=>(0,a.jsxs)(e$.xz,{ref:r,className:(0,u.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...t,children:[s,(0,a.jsx)(e$.JO,{asChild:!0,children:(0,a.jsx)(eL.Z,{className:"h-4 w-4 opacity-50"})})]}));eG.displayName=e$.xz.displayName;let eq=r.forwardRef(({className:e,...s},t)=>(0,a.jsx)(e$.u_,{ref:t,className:(0,u.cn)("flex cursor-default items-center justify-center py-1",e),...s,children:(0,a.jsx)(eB.Z,{className:"h-4 w-4"})}));eq.displayName=e$.u_.displayName;let eY=r.forwardRef(({className:e,...s},t)=>(0,a.jsx)(e$.$G,{ref:t,className:(0,u.cn)("flex cursor-default items-center justify-center py-1",e),...s,children:(0,a.jsx)(eL.Z,{className:"h-4 w-4"})}));eY.displayName=e$.$G.displayName;let eH=r.forwardRef(({className:e,children:s,position:t="popper",...r},i)=>(0,a.jsx)(e$.h_,{children:(0,a.jsxs)(e$.VY,{ref:i,className:(0,u.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===t&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:t,...r,children:[(0,a.jsx)(eq,{}),(0,a.jsx)(e$.l_,{className:(0,u.cn)("p-1","popper"===t&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:s}),(0,a.jsx)(eY,{})]})}));eH.displayName=e$.VY.displayName,r.forwardRef(({className:e,...s},t)=>(0,a.jsx)(e$.__,{ref:t,className:(0,u.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...s})).displayName=e$.__.displayName;let eW=r.forwardRef(({className:e,children:s,...t},r)=>(0,a.jsxs)(e$.ck,{ref:r,className:(0,u.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...t,children:[(0,a.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(e$.wU,{children:(0,a.jsx)(es.Z,{className:"h-4 w-4"})})}),(0,a.jsx)(e$.eT,{children:s})]}));function eQ({category:e,value:s,onChange:t,sortBy:i="quality"}){let[n,d]=(0,r.useState)([]),[o,c]=(0,r.useState)(!0);(0,r.useEffect)(()=>{(async()=>{try{let s=await fetch(`/api/models?category=${e}`);if(!s.ok)throw Error("Failed to fetch models");let t=await s.json();d(t.models||[])}catch(e){console.error("Error fetching models:",e)}finally{c(!1)}})()},[e]);let m=(0,r.useMemo)(()=>n.length?[...n].sort((e,s)=>{switch(i){case"cost":return e.pricePerUnit-s.pricePerUnit;case"quality":return s.qualityRating-e.qualityRating;case"speed":return(e.avgSpeed||999)-(s.avgSpeed||999);default:return 0}}):[],[n,i]);return o?(0,a.jsxs)("div",{className:"flex items-center gap-2 text-muted-foreground",children:[(0,a.jsx)(l.Z,{className:"h-4 w-4 animate-spin"}),(0,a.jsx)("span",{className:"text-sm",children:"Chargement des mod\xe8les..."})]}):(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)(eD._,{className:"text-base font-medium",children:["Mod\xe8le ","image"===e?"Image":"Vid\xe9o"]}),(0,a.jsxs)(e_,{value:s,onValueChange:t,children:[(0,a.jsx)(eG,{className:"w-full",children:(0,a.jsx)(eJ,{placeholder:`S\xe9lectionner un mod\xe8le ${e}`})}),(0,a.jsx)(eH,{children:m.map(e=>(0,a.jsx)(eW,{value:e.endpoint,children:(0,a.jsxs)("div",{className:"flex items-center justify-between w-full gap-4",children:[(0,a.jsxs)("div",{className:"flex flex-col items-start",children:[(0,a.jsx)("span",{className:"font-medium",children:e.name}),e.description&&(0,a.jsx)("span",{className:"text-xs text-muted-foreground line-clamp-1",children:e.description})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 text-xs",children:[(0,a.jsx)(ef,{variant:e.qualityRating>=4?"default":"secondary",className:"shrink-0",children:"⭐".repeat(e.qualityRating)}),(0,a.jsxs)("span",{className:"font-mono text-muted-foreground shrink-0",children:["$",e.pricePerUnit.toFixed(3),"/",e.priceUnit]})]})]})},e.id))})]})]})}eW.displayName=e$.ck.displayName,r.forwardRef(({className:e,...s},t)=>(0,a.jsx)(e$.Z0,{ref:t,className:(0,u.cn)("-mx-1 my-1 h-px bg-muted",e),...s})).displayName=e$.Z0.displayName;var eX=t(9904),eK=t(8218);function e0(){let[e,s]=(0,r.useState)(null),[t,n]=(0,r.useState)(!0),[d,c]=(0,r.useState)(!1),[m,u]=(0,r.useState)(null),[x,f]=(0,r.useState)(!1);(0,r.useEffect)(()=>{h()},[]),(0,r.useEffect)(()=>{e&&p()},[e?.imageModel,e?.imageToVideoModel]);let h=async()=>{try{let e=await fetch("/api/models/preferences");if(!e.ok)throw Error("Failed to fetch preferences");let t=await e.json();s(t.preferences)}catch(e){console.error("Error fetching preferences:",e),o.Am.error("Impossible de charger les pr\xe9f\xe9rences")}finally{n(!1)}},p=async()=>{if(e){f(!0);try{let s=await fetch("/api/models/estimate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({imageModel:e.imageModel,videoModel:e.imageToVideoModel,variations:3})});if(!s.ok)throw Error("Failed to estimate cost");let t=await s.json();u(t.estimate)}catch(e){console.error("Error estimating cost:",e)}finally{f(!1)}}},g=async()=>{if(e){c(!0);try{if(!(await fetch("/api/models/preferences",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).ok)throw Error("Failed to save preferences");o.Am.success("Pr\xe9f\xe9rences enregistr\xe9es avec succ\xe8s")}catch(e){console.error("Error saving preferences:",e),o.Am.error("Erreur lors de l'enregistrement")}finally{c(!1)}}},j=t=>{e&&s({...e,prioritizeQuality:"quality"===t,prioritizeCost:"cost"===t,prioritizeSpeed:"speed"===t})};if(t)return(0,a.jsx)(eT,{children:(0,a.jsx)(eF,{className:"flex items-center justify-center py-12",children:(0,a.jsx)(l.Z,{className:"h-8 w-8 animate-spin text-muted-foreground"})})});if(!e)return null;let b=e.prioritizeQuality?"quality":e.prioritizeCost?"cost":e.prioritizeSpeed?"speed":"quality";return(0,a.jsxs)(eT,{children:[(0,a.jsxs)(eZ,{children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(eX.Z,{className:"h-5 w-5"}),(0,a.jsx)(eA,{children:"Param\xe8tres des Mod\xe8les AI"})]}),(0,a.jsx)(eR,{children:"Personnalisez les mod\xe8les utilis\xe9s pour la g\xe9n\xe9ration de contenu"})]}),(0,a.jsxs)(eF,{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)(eD._,{className:"text-base font-medium",children:"Priorit\xe9"}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)(i.z,{type:"button",variant:"quality"===b?"default":"outline",size:"sm",onClick:()=>j("quality"),className:"flex-1",children:[(0,a.jsx)(y.Z,{className:"h-4 w-4 mr-2"}),"Qualit\xe9"]}),(0,a.jsxs)(i.z,{type:"button",variant:"cost"===b?"default":"outline",size:"sm",onClick:()=>j("cost"),className:"flex-1",children:[(0,a.jsx)(eV.Z,{className:"h-4 w-4 mr-2"}),"\xc9conomie"]}),(0,a.jsxs)(i.z,{type:"button",variant:"speed"===b?"default":"outline",size:"sm",onClick:()=>j("speed"),className:"flex-1",children:[(0,a.jsx)(eK.Z,{className:"h-4 w-4 mr-2"}),"Vitesse"]})]})]}),(0,a.jsx)(eQ,{category:"image",value:e.imageModel,onChange:t=>s({...e,imageModel:t}),sortBy:b}),(0,a.jsx)(eQ,{category:"video",value:e.imageToVideoModel,onChange:t=>s({...e,imageToVideoModel:t}),sortBy:b}),m&&(0,a.jsxs)("div",{className:"p-4 bg-muted rounded-lg space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-sm font-medium",children:"Co\xfbt estim\xe9 par g\xe9n\xe9ration"}),x&&(0,a.jsx)(l.Z,{className:"h-4 w-4 animate-spin"})]}),(0,a.jsxs)("div",{className:"space-y-1 text-sm",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"Image (1x)"}),(0,a.jsxs)("span",{className:"font-mono",children:["$",m.imageCost.toFixed(3)]})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"Vid\xe9os (3x)"}),(0,a.jsxs)("span",{className:"font-mono",children:["$",m.videoCost.toFixed(3)]})]}),(0,a.jsxs)("div",{className:"flex justify-between pt-2 border-t font-medium",children:[(0,a.jsx)("span",{children:"Total"}),(0,a.jsxs)("span",{className:"font-mono",children:["$",m.totalCost.toFixed(3)]})]})]})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center pt-4 border-t",children:[(0,a.jsx)(i.z,{type:"button",variant:"outline",onClick:h,disabled:d,children:"Annuler"}),(0,a.jsx)(i.z,{onClick:g,disabled:d,children:d?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(l.Z,{className:"h-4 w-4 mr-2 animate-spin"}),"Enregistrement..."]}):"Enregistrer"})]})]})]})}function e1({session:e}){let[s,t]=(0,r.useState)(""),[l,n]=(0,r.useState)(null),[d,c]=(0,r.useState)(!0),[m,u]=(0,r.useState)(!1),x=async()=>{try{c(!0);let e=await fetch("/api/budget");if(e.ok){let s=await e.json();n(s),null!==s.manualBudget&&t(s.manualBudget.toFixed(2))}}catch(e){console.error("Failed to fetch budget:",e),o.Am.error("Failed to load budget information")}finally{c(!1)}};(0,r.useEffect)(()=>{x()},[]);let f=async()=>{try{u(!0);let e=""===s.trim()?null:parseFloat(s);if(null!==e&&(isNaN(e)||e<0)){o.Am.error("Please enter a valid budget amount");return}let t=await fetch("/api/budget",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({budget:e})});if(t.ok)o.Am.success(null===e?"Budget removed":"Budget updated successfully"),await x();else{let e=await t.json();o.Am.error(e.error||"Failed to update budget")}}catch(e){console.error("Failed to save budget:",e),o.Am.error("Failed to save budget")}finally{u(!1)}};return(0,a.jsxs)("div",{className:"space-y-fluid-lg pb-20 md:pb-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-fluid-2xl font-bold text-foreground mb-fluid-xs",children:"Settings"}),(0,a.jsx)("p",{className:"text-fluid-sm text-muted-foreground",children:"Manage your account and preferences"})]}),(0,a.jsx)(eT,{className:"glass border-border",children:(0,a.jsx)(eZ,{children:(0,a.jsxs)("div",{className:"flex items-center gap-fluid-sm",children:[(0,a.jsx)("div",{className:"w-12 h-12 bg-primary/20 text-primary rounded-full flex items-center justify-center",children:(0,a.jsx)(ew.Z,{className:"w-6 h-6"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)(eA,{className:"text-fluid-base",children:e.user?.name||"User"}),(0,a.jsx)(eR,{className:"text-fluid-xs",children:e.user?.email})]})]})})}),(0,a.jsxs)(eT,{className:"glass border-border",children:[(0,a.jsxs)(eZ,{children:[(0,a.jsxs)("div",{className:"flex items-center gap-fluid-sm",children:[(0,a.jsx)(eM.Z,{className:"w-5 h-5 text-secondary"}),(0,a.jsx)(eA,{className:"text-fluid-base",children:"Appearance"})]}),(0,a.jsx)(eR,{className:"text-fluid-xs",children:"Theme is set to Dark Mode"})]}),(0,a.jsx)(eF,{children:(0,a.jsx)("p",{className:"text-fluid-xs text-muted-foreground",children:"Dark mode is optimized for content creators and reduces eye strain."})})]}),(0,a.jsx)(e0,{}),(0,a.jsxs)(eT,{className:"glass border-border",children:[(0,a.jsxs)(eZ,{children:[(0,a.jsxs)("div",{className:"flex items-center gap-fluid-sm",children:[(0,a.jsx)(eV.Z,{className:"w-5 h-5 text-green-500"}),(0,a.jsx)(eA,{className:"text-fluid-base",children:"Budget Management"})]}),(0,a.jsx)(eR,{className:"text-fluid-xs",children:"Track your fal.ai API consumption and budget"})]}),(0,a.jsxs)(eF,{className:"space-y-fluid-md",children:[(0,a.jsx)("div",{className:"p-fluid-sm bg-primary/5 border border-primary/20 rounded-fluid-md",children:(0,a.jsxs)("div",{className:"flex items-start gap-fluid-sm",children:[(0,a.jsx)(eO.Z,{className:"w-4 h-4 text-primary mt-1 flex-shrink-0"}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("p",{className:"text-fluid-xs font-medium text-foreground mb-fluid-2xs",children:"Check your real balance on fal.ai"}),(0,a.jsx)("p",{className:"text-fluid-2xs text-muted-foreground mb-fluid-xs",children:"View your actual credit balance, transaction history, and billing details"}),(0,a.jsxs)(i.z,{size:"sm",variant:"outline",className:"text-fluid-2xs h-8",onClick:()=>{window.open("https://fal.ai/dashboard/keys","_blank")},children:[(0,a.jsx)(eO.Z,{className:"w-3 h-3 mr-1"}),"Open fal.ai Dashboard"]})]})]})}),(0,a.jsxs)("div",{className:"space-y-fluid-xs",children:[(0,a.jsx)(eD._,{htmlFor:"budget-input",className:"text-fluid-sm",children:"Set Your Current Budget (€)"}),(0,a.jsx)("p",{className:"text-fluid-2xs text-muted-foreground",children:"After checking your fal.ai dashboard, enter your current credit balance here to track consumption"}),(0,a.jsxs)("div",{className:"flex gap-fluid-xs",children:[(0,a.jsx)(eI.I,{id:"budget-input",type:"number",step:"0.01",min:"0",placeholder:"e.g., 10.00",value:s,onChange:e=>t(e.target.value),className:"flex-1 text-fluid-sm",disabled:m}),(0,a.jsx)(i.z,{size:"sm",onClick:f,disabled:m||d,className:"text-fluid-xs",children:m?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(L.Z,{className:"w-3 h-3 mr-1 animate-spin"}),"Saving..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(eP.Z,{className:"w-3 h-3 mr-1"}),"Save"]})})]})]}),!d&&l&&(0,a.jsxs)("div",{className:"space-y-fluid-xs pt-fluid-sm border-t border-border",children:[(0,a.jsxs)("div",{className:"flex justify-between text-fluid-xs",children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"Total Spent (Estimated)"}),(0,a.jsxs)("span",{className:"font-semibold text-foreground",children:["€",l.spent.toFixed(2)]})]}),l.hasManualBudget&&null!==l.manualBudget&&null!==l.remaining?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"flex justify-between text-fluid-sm",children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"Remaining Budget"}),(0,a.jsxs)("span",{className:`font-semibold ${l.remaining>.5*l.manualBudget?"text-green-500":l.remaining>.25*l.manualBudget?"text-yellow-500":"text-red-500"}`,children:["€",l.remaining.toFixed(2)," / €",l.manualBudget.toFixed(2)]})]}),(0,a.jsx)("div",{className:"h-2 bg-muted rounded-full overflow-hidden",children:(0,a.jsx)("div",{className:`h-full rounded-full transition-all ${l.remaining>.5*l.manualBudget?"bg-green-500":l.remaining>.25*l.manualBudget?"bg-yellow-500":"bg-red-500"}`,style:{width:`${Math.max(0,Math.min(100,l.remaining/l.manualBudget*100))}%`}})}),l.remaining<.25*l.manualBudget&&(0,a.jsx)("p",{className:"text-fluid-2xs text-red-500 font-medium",children:"⚠️ Low budget! Consider adding more credits on fal.ai"})]}):(0,a.jsx)("p",{className:"text-fluid-2xs text-muted-foreground italic",children:"Set a budget above to track your remaining credits"})]}),d&&(0,a.jsx)("div",{className:"flex items-center justify-center py-fluid-md",children:(0,a.jsx)(L.Z,{className:"w-4 h-4 animate-spin text-muted-foreground"})})]})]}),(0,a.jsxs)(i.z,{variant:"destructive",className:"w-full text-fluid-sm",onClick:()=>(0,eC.signOut)({callbackUrl:"/"}),children:[(0,a.jsx)(eU.Z,{className:"w-4 h-4 mr-2"}),"Sign Out"]})]})}var e2=t(445);let e5=r.forwardRef(({className:e,...s},t)=>(0,a.jsx)(e2.fC,{ref:t,className:(0,u.cn)("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",e),...s}));e5.displayName=e2.fC.displayName;let e4=r.forwardRef(({className:e,...s},t)=>(0,a.jsx)(e2.Ee,{ref:t,className:(0,u.cn)("aspect-square h-full w-full",e),...s}));e4.displayName=e2.Ee.displayName;let e3=r.forwardRef(({className:e,...s},t)=>(0,a.jsx)(e2.NY,{ref:t,className:(0,u.cn)("flex h-full w-full items-center justify-center rounded-full bg-muted",e),...s}));e3.displayName=e2.NY.displayName;var e8=t(2814),e6=t(8274),e9=t(4670);function e7({session:e}){let s=e.user?.name||"User",t=e.user?.email||"",[i,l]=(0,r.useState)({totalJobs:0,completedJobs:0,totalCost:0,averageCost:0}),[n,d]=(0,r.useState)(null),[o,c]=(0,r.useState)(!0),[m,u]=(0,r.useState)(!0),x=s.split(" ").map(e=>e[0]).join("").toUpperCase().slice(0,2),f=async()=>{try{let e=await fetch("/api/jobs");if(e.ok){let s=await e.json(),t=s.filter(e=>"COMPLETED"===e.status),a=s.reduce((e,s)=>e+(s.cost||0),0);l({totalJobs:s.length,completedJobs:t.length,totalCost:a,averageCost:s.length>0?a/s.length:0})}}catch(e){console.error("Failed to fetch stats:",e)}finally{c(!1)}},h=async()=>{try{let e=await fetch("/api/budget");if(e.ok){let s=await e.json();d(s)}}catch(e){console.error("Failed to fetch budget:",e)}finally{u(!1)}};(0,r.useEffect)(()=>{f(),h();let e=setInterval(()=>{f(),h()},3e4);return()=>clearInterval(e)},[]);let p=n?.hasManualBudget&&n.manualBudget?n.spent/n.manualBudget*100:0;return(0,a.jsxs)("div",{className:"space-y-fluid-lg pb-20 md:pb-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-fluid-2xl font-bold text-foreground mb-fluid-xs leading-fluid-tight",children:"Profile"}),(0,a.jsx)("p",{className:"text-fluid-sm text-muted-foreground leading-fluid-normal",children:"Your content creation statistics"})]}),(0,a.jsx)(eT,{className:"glass border-border",children:(0,a.jsx)(eZ,{children:(0,a.jsxs)("div",{className:"flex items-center gap-fluid-md",children:[(0,a.jsxs)(e5,{className:"w-16 h-16 sm:w-20 sm:h-20 border-2 border-primary",children:[(0,a.jsx)(e4,{src:e.user?.image||void 0}),(0,a.jsx)(e3,{className:"bg-primary/20 text-primary text-fluid-xl font-bold",children:x})]}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)(eA,{className:"text-fluid-xl leading-fluid-tight",children:s}),(0,a.jsx)(eR,{className:"text-fluid-sm leading-fluid-normal mt-fluid-xs",children:t}),(0,a.jsx)("div",{className:"flex gap-fluid-xs mt-fluid-sm",children:(0,a.jsxs)(ef,{variant:"secondary",className:"bg-secondary/20 text-secondary border-secondary/30 text-fluid-xs",children:[(0,a.jsx)(y.Z,{className:"w-3 h-3 mr-1"}),"Creator"]})})]})]})})}),(0,a.jsxs)(eT,{className:"glass border-border bg-gradient-to-br from-green-500/10 to-emerald-500/10",children:[(0,a.jsxs)(eZ,{children:[(0,a.jsxs)(eA,{className:"flex items-center gap-fluid-xs text-fluid-lg leading-fluid-tight",children:[(0,a.jsx)(eV.Z,{className:"w-5 h-5 text-green-500"}),"Budget & Usage"]}),(0,a.jsx)(eR,{className:"text-fluid-xs leading-fluid-normal",children:"Real-time spending tracker"})]}),(0,a.jsx)(eF,{className:"space-y-fluid-md",children:m?(0,a.jsx)("div",{className:"flex items-center justify-center py-fluid-lg",children:(0,a.jsx)(L.Z,{className:"w-5 h-5 animate-spin text-muted-foreground"})}):n?.hasManualBudget&&null!==n.manualBudget?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-fluid-md sm:gap-fluid-lg",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-fluid-xs text-muted-foreground mb-fluid-xs leading-fluid-normal",children:"Total Budget"}),(0,a.jsxs)("div",{className:"text-fluid-xl sm:text-fluid-2xl font-bold text-foreground leading-fluid-tight",children:["€",n.manualBudget.toFixed(2)]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-fluid-xs text-muted-foreground mb-fluid-xs leading-fluid-normal",children:"Remaining"}),(0,a.jsxs)("div",{className:`text-fluid-xl sm:text-fluid-2xl font-bold leading-fluid-tight ${n.remaining&&n.remaining>.5*n.manualBudget?"text-green-500":n.remaining&&n.remaining>.25*n.manualBudget?"text-yellow-500":"text-red-500"}`,children:["€",n.remaining?.toFixed(2)||"0.00"]})]})]}),(0,a.jsxs)("div",{className:"space-y-fluid-xs",children:[(0,a.jsxs)("div",{className:"flex justify-between text-fluid-xs sm:text-fluid-sm",children:[(0,a.jsx)("span",{className:"text-muted-foreground leading-fluid-normal",children:"Spent (Estimated)"}),(0,a.jsxs)("span",{className:"text-foreground font-semibold leading-fluid-normal",children:["€",n.spent.toFixed(2)," (",p.toFixed(1),"%)"]})]}),(0,a.jsx)("div",{className:"w-full bg-muted rounded-fluid-md h-2.5 overflow-hidden",children:(0,a.jsx)("div",{className:`h-full transition-all duration-300 ${p<50?"bg-green-500":p<80?"bg-yellow-500":"bg-red-500"}`,style:{width:`${Math.min(p,100)}%`}})})]}),i.totalJobs>0&&(0,a.jsx)("div",{className:"pt-fluid-sm border-t border-border",children:(0,a.jsxs)("div",{className:"flex items-center justify-between text-fluid-xs sm:text-fluid-sm",children:[(0,a.jsx)("span",{className:"text-muted-foreground leading-fluid-normal",children:"Avg. Cost per Video"}),(0,a.jsxs)("span",{className:"text-foreground font-semibold leading-fluid-normal",children:["€",i.averageCost.toFixed(3)]})]})}),n.remaining&&n.remaining<.25*n.manualBudget&&(0,a.jsx)("div",{className:"p-fluid-sm bg-red-500/10 border border-red-500/20 rounded-fluid-md",children:(0,a.jsx)("p",{className:"text-fluid-xs text-red-500 font-medium leading-fluid-normal",children:"⚠️ Low budget! Consider adding more credits on fal.ai"})})]}):(0,a.jsx)("div",{className:"text-center py-fluid-lg",children:(0,a.jsx)("p",{className:"text-fluid-sm text-muted-foreground leading-fluid-normal",children:"No budget set. Go to Settings to configure your budget."})})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-fluid-md",children:[(0,a.jsx)(eT,{className:"glass border-border",children:(0,a.jsx)(eF,{className:"pt-fluid-lg",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"w-12 h-12 bg-primary/20 text-primary rounded-full flex items-center justify-center mx-auto mb-fluid-sm",children:(0,a.jsx)(e8.Z,{className:"w-5 h-5 sm:w-6 sm:h-6"})}),(0,a.jsx)("div",{className:"text-fluid-2xl sm:text-fluid-3xl font-bold text-foreground leading-fluid-tight",children:o?"...":i.totalJobs}),(0,a.jsx)("div",{className:"text-fluid-xs sm:text-fluid-sm text-muted-foreground mt-fluid-xs leading-fluid-normal",children:"Videos Created"})]})})}),(0,a.jsx)(eT,{className:"glass border-border",children:(0,a.jsx)(eF,{className:"pt-fluid-lg",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"w-12 h-12 bg-secondary/20 text-secondary rounded-full flex items-center justify-center mx-auto mb-fluid-sm",children:(0,a.jsx)(e6.Z,{className:"w-5 h-5 sm:w-6 sm:h-6"})}),(0,a.jsx)("div",{className:"text-fluid-2xl sm:text-fluid-3xl font-bold text-foreground leading-fluid-tight",children:o?"...":i.completedJobs}),(0,a.jsx)("div",{className:"text-fluid-xs sm:text-fluid-sm text-muted-foreground mt-fluid-xs leading-fluid-normal",children:"Completed"})]})})}),(0,a.jsx)(eT,{className:"glass border-border",children:(0,a.jsx)(eF,{className:"pt-fluid-lg",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"w-12 h-12 bg-green-500/20 text-green-500 rounded-full flex items-center justify-center mx-auto mb-fluid-sm",children:(0,a.jsx)(e9.Z,{className:"w-5 h-5 sm:w-6 sm:h-6"})}),(0,a.jsxs)("div",{className:"text-fluid-2xl sm:text-fluid-3xl font-bold text-foreground leading-fluid-tight",children:[o?"...":i.totalJobs>0?(i.completedJobs/i.totalJobs*100).toFixed(0):0,"%"]}),(0,a.jsx)("div",{className:"text-fluid-xs sm:text-fluid-sm text-muted-foreground mt-fluid-xs leading-fluid-normal",children:"Success Rate"})]})})})]}),(0,a.jsxs)(eT,{className:"glass border-border",children:[(0,a.jsxs)(eZ,{children:[(0,a.jsx)(eA,{className:"text-fluid-lg leading-fluid-tight",children:"Recent Activity"}),(0,a.jsx)(eR,{className:"text-fluid-xs leading-fluid-normal",children:"Your latest content generations"})]}),(0,a.jsx)(eF,{children:(0,a.jsxs)("div",{className:"text-center py-fluid-2xl",children:[(0,a.jsx)(y.Z,{className:"w-10 h-10 sm:w-12 sm:h-12 text-muted-foreground mx-auto mb-fluid-sm"}),(0,a.jsx)("p",{className:"text-fluid-sm text-muted-foreground leading-fluid-normal",children:"No activity yet"}),(0,a.jsx)("p",{className:"text-fluid-xs text-muted-foreground mt-fluid-xs leading-fluid-normal",children:"Start creating viral content to see your activity here"})]})})]})]})}var se=t(362),ss=t(4624),st=t(8022);let sa=st.fC;st.xz;let sr=st.h_,si=r.forwardRef(({className:e,...s},t)=>(0,a.jsx)(st.aV,{className:(0,u.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...s,ref:t}));si.displayName=st.aV.displayName;let sl=r.forwardRef(({className:e,...s},t)=>(0,a.jsxs)(sr,{children:[(0,a.jsx)(si,{}),(0,a.jsx)(st.VY,{ref:t,className:(0,u.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...s})]}));sl.displayName=st.VY.displayName;let sn=({className:e,...s})=>(0,a.jsx)("div",{className:(0,u.cn)("flex flex-col space-y-2 text-center sm:text-left",e),...s});sn.displayName="AlertDialogHeader";let sd=({className:e,...s})=>(0,a.jsx)("div",{className:(0,u.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...s});sd.displayName="AlertDialogFooter";let so=r.forwardRef(({className:e,...s},t)=>(0,a.jsx)(st.Dx,{ref:t,className:(0,u.cn)("text-lg font-semibold",e),...s}));so.displayName=st.Dx.displayName;let sc=r.forwardRef(({className:e,...s},t)=>(0,a.jsx)(st.dk,{ref:t,className:(0,u.cn)("text-sm text-muted-foreground",e),...s}));sc.displayName=st.dk.displayName;let sm=r.forwardRef(({className:e,...s},t)=>(0,a.jsx)(st.aU,{ref:t,className:(0,u.cn)((0,i.d)(),e),...s}));sm.displayName=st.aU.displayName;let su=r.forwardRef(({className:e,...s},t)=>(0,a.jsx)(st.$j,{ref:t,className:(0,u.cn)((0,i.d)({variant:"outline"}),"mt-2 sm:mt-0",e),...s}));function sx({session:e}){let[s,t]=(0,r.useState)([]),[n,d]=(0,r.useState)(!0),[o,c]=(0,r.useState)(null),[m,u]=(0,r.useState)(!1),[x,f]=(0,r.useState)(null),{toast:h}=(0,B.pm)();(0,r.useEffect)(()=>{p()},[]);let p=async()=>{try{let e=await fetch("/api/admin/users");if(e.ok){let s=await e.json();t(s)}else h({title:"Erreur",description:"Impossible de charger les utilisateurs",variant:"destructive"})}catch(e){console.error("Failed to fetch users:",e),h({title:"Erreur",description:"Erreur lors du chargement des utilisateurs",variant:"destructive"})}finally{d(!1)}},g=async e=>{c(e);try{if((await fetch(`/api/admin/users/${e}/approve`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({approve:!0})})).ok)h({title:"Utilisateur approuv\xe9",description:"L'utilisateur peut maintenant se connecter"}),p();else throw Error("Approval failed")}catch(e){h({title:"Erreur",description:"Impossible d'approuver l'utilisateur",variant:"destructive"})}finally{c(null)}},j=async e=>{c(e);try{if((await fetch(`/api/admin/users/${e}/approve`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({approve:!1})})).ok)h({title:"Utilisateur rejet\xe9",description:"L'acc\xe8s a \xe9t\xe9 r\xe9voqu\xe9"}),p();else throw Error("Rejection failed")}catch(e){h({title:"Erreur",description:"Impossible de rejeter l'utilisateur",variant:"destructive"})}finally{c(null)}},b=e=>{f(e),u(!0)},N=async()=>{if(x){c(x.id);try{let e=await fetch(`/api/admin/users/${x.id}/delete`,{method:"DELETE"});if(e.ok)h({title:"Utilisateur supprim\xe9",description:"L'utilisateur a \xe9t\xe9 supprim\xe9 avec succ\xe8s"}),p();else{let s=await e.json();throw Error(s.error||"Delete failed")}}catch(e){h({title:"Erreur",description:e.message||"Impossible de supprimer l'utilisateur",variant:"destructive"})}finally{c(null),u(!1),f(null)}}},v=s.filter(e=>!e.isApproved),y=s.filter(e=>e.isApproved);return"ADMIN"!==e.user.role?(0,a.jsxs)(z.bZ,{className:"border-destructive/50 bg-destructive/10",children:[(0,a.jsx)(se.Z,{className:"h-4 w-4 text-destructive"}),(0,a.jsx)(z.X,{className:"text-destructive",children:"Acc\xe8s refus\xe9. Vous devez \xeatre administrateur pour acc\xe9der \xe0 cette page."})]}):n?(0,a.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,a.jsx)(l.Z,{className:"w-8 h-8 animate-spin text-primary"})}):(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-12 h-12 bg-primary/20 text-primary rounded-xl flex items-center justify-center",children:(0,a.jsx)(ek.Z,{className:"w-6 h-6"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-foreground",children:"Administration"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"G\xe9rer les utilisateurs et les permissions"})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsxs)(eT,{children:[(0,a.jsx)(eZ,{className:"pb-3",children:(0,a.jsx)(eA,{className:"text-sm font-medium text-muted-foreground",children:"Total Utilisateurs"})}),(0,a.jsx)(eF,{children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(ss.Z,{className:"w-5 h-5 text-primary"}),(0,a.jsx)("span",{className:"text-2xl font-bold",children:s.length})]})})]}),(0,a.jsxs)(eT,{children:[(0,a.jsx)(eZ,{className:"pb-3",children:(0,a.jsx)(eA,{className:"text-sm font-medium text-muted-foreground",children:"En Attente"})}),(0,a.jsx)(eF,{children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(eh.Z,{className:"w-5 h-5 text-yellow-500"}),(0,a.jsx)("span",{className:"text-2xl font-bold",children:v.length})]})})]}),(0,a.jsxs)(eT,{children:[(0,a.jsx)(eZ,{className:"pb-3",children:(0,a.jsx)(eA,{className:"text-sm font-medium text-muted-foreground",children:"Approuv\xe9s"})}),(0,a.jsx)(eF,{children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(A.Z,{className:"w-5 h-5 text-green-500"}),(0,a.jsx)("span",{className:"text-2xl font-bold",children:y.length})]})})]})]}),v.length>0&&(0,a.jsxs)(eT,{children:[(0,a.jsxs)(eZ,{children:[(0,a.jsxs)(eA,{className:"flex items-center gap-2",children:[(0,a.jsx)(eh.Z,{className:"w-5 h-5 text-yellow-500"}),"Utilisateurs en Attente d'Approbation"]}),(0,a.jsx)(eR,{children:"Ces utilisateurs attendent votre approbation pour acc\xe9der \xe0 l'application"})]}),(0,a.jsx)(eF,{className:"space-y-3",children:v.map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 border rounded-lg bg-muted/30",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,a.jsx)("p",{className:"font-medium",children:e.name||`${e.firstName||""} ${e.lastName||""}`.trim()||"Sans nom"}),(0,a.jsx)(ef,{variant:"outline",className:"text-yellow-600 border-yellow-600",children:"En attente"})]}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:e.email}),(0,a.jsxs)("p",{className:"text-xs text-muted-foreground",children:["Inscrit le ",new Date(e.createdAt).toLocaleDateString("fr-FR")]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(i.z,{onClick:()=>g(e.id),disabled:o===e.id,size:"sm",className:"bg-green-500 hover:bg-green-600",children:o===e.id?(0,a.jsx)(l.Z,{className:"w-4 h-4 animate-spin"}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(A.Z,{className:"w-4 h-4 mr-1"}),"Approuver"]})}),(0,a.jsx)(i.z,{onClick:()=>b(e),disabled:o===e.id,size:"sm",variant:"outline",className:"border-red-500 text-red-500 hover:bg-red-50",children:(0,a.jsx)(eg.Z,{className:"w-4 h-4"})})]})]},e.id))})]}),(0,a.jsxs)(eT,{children:[(0,a.jsxs)(eZ,{children:[(0,a.jsxs)(eA,{className:"flex items-center gap-2",children:[(0,a.jsx)(A.Z,{className:"w-5 h-5 text-green-500"}),"Utilisateurs Approuv\xe9s"]}),(0,a.jsx)(eR,{children:"Utilisateurs ayant acc\xe8s \xe0 l'application"})]}),(0,a.jsx)(eF,{className:"space-y-3",children:0===y.length?(0,a.jsx)("p",{className:"text-sm text-muted-foreground text-center py-8",children:"Aucun utilisateur approuv\xe9"}):y.map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,a.jsx)("p",{className:"font-medium",children:e.name||`${e.firstName||""} ${e.lastName||""}`.trim()||"Sans nom"}),"ADMIN"===e.role&&(0,a.jsx)(ef,{className:"bg-primary",children:"Admin"}),(0,a.jsx)(ef,{variant:"outline",className:"text-green-600 border-green-600",children:"Approuv\xe9"})]}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:e.email}),(0,a.jsxs)("p",{className:"text-xs text-muted-foreground",children:[e._count.contentJobs," vid\xe9o(s) g\xe9n\xe9r\xe9e(s)"]})]}),"ADMIN"!==e.role&&(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(i.z,{onClick:()=>j(e.id),disabled:o===e.id,size:"sm",variant:"outline",className:"border-orange-500 text-orange-500 hover:bg-orange-50",children:o===e.id?(0,a.jsx)(l.Z,{className:"w-4 h-4 animate-spin"}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(Z.Z,{className:"w-4 h-4 mr-1"}),"R\xe9voquer"]})}),(0,a.jsx)(i.z,{onClick:()=>b(e),disabled:o===e.id,size:"sm",variant:"outline",className:"border-red-500 text-red-500 hover:bg-red-50",children:(0,a.jsx)(eg.Z,{className:"w-4 h-4"})})]})]},e.id))})]}),(0,a.jsx)(sa,{open:m,onOpenChange:u,children:(0,a.jsxs)(sl,{children:[(0,a.jsxs)(sn,{children:[(0,a.jsx)(so,{children:"Confirmer la suppression"}),(0,a.jsxs)(sc,{children:["\xcates-vous s\xfbr de vouloir supprimer l'utilisateur"," ",(0,a.jsx)("strong",{children:x?.email})," ? Cette action est irr\xe9versible et supprimera toutes les donn\xe9es associ\xe9es."]})]}),(0,a.jsxs)(sd,{children:[(0,a.jsx)(su,{children:"Annuler"}),(0,a.jsx)(sm,{onClick:N,className:"bg-red-500 hover:bg-red-600",children:"Supprimer"})]})]})})]})}function sf({session:e}){let[s,t]=(0,r.useState)(null),[i,l]=(0,r.useState)(!1),[n,d]=(0,r.useState)("create"),[o,c]=(0,r.useState)({spent:0,remaining:null,hasManualBudget:!1});(0,r.useEffect)(()=>{let e=async()=>{try{let e=await fetch("/api/budget");if(e.ok){let s=await e.json();c({spent:s.spent,remaining:s.remaining,hasManualBudget:s.hasManualBudget})}}catch(e){console.error("Failed to fetch budget:",e)}};e();let s=setInterval(e,1e4);return()=>clearInterval(s)},[]);let m={initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20}},u={type:"tween",ease:"easeInOut",duration:.2};return(0,a.jsxs)("div",{className:"min-h-screen bg-background",children:[(0,a.jsx)("header",{className:"sticky top-0 z-40 glass border-b border-border",children:(0,a.jsx)("div",{className:"container mx-auto px-fluid-container py-fluid-sm",children:(0,a.jsxs)("div",{className:"flex items-center justify-between max-w-7xl mx-auto",children:[(0,a.jsxs)("div",{className:"flex items-center gap-fluid-sm",children:[(0,a.jsx)("div",{className:"w-8 h-8 sm:w-10 sm:h-10 bg-gradient-to-br from-primary to-secondary rounded-fluid-md flex items-center justify-center shadow-lg shadow-primary/20",children:(0,a.jsx)(y.Z,{className:"w-4 h-4 sm:w-5 sm:h-5 text-background"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-fluid-lg font-bold text-foreground leading-fluid-tight",children:"ReelGen AI"}),(0,a.jsx)("p",{className:"text-fluid-xs text-muted-foreground hidden sm:block leading-fluid-tight",children:"Create Viral Content"})]})]}),(0,a.jsx)("div",{className:"hidden md:flex items-center gap-fluid-sm",children:(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("p",{className:"text-fluid-sm font-medium text-foreground leading-fluid-tight",children:e.user?.name||"User"}),(0,a.jsx)("p",{className:"text-fluid-xs text-muted-foreground leading-fluid-tight",children:o.hasManualBudget&&null!==o.remaining?(0,a.jsxs)(a.Fragment,{children:["Budget: ",(0,a.jsxs)("span",{className:`font-semibold ${o.remaining>(o.remaining+o.spent)*.5?"text-green-500":o.remaining>(o.remaining+o.spent)*.25?"text-yellow-500":"text-red-500"}`,children:["€",o.remaining.toFixed(2)]})]}):(0,a.jsxs)(a.Fragment,{children:["Spent: ",(0,a.jsxs)("span",{className:"font-semibold text-foreground",children:["€",o.spent.toFixed(2)]})]})})]})})]})})}),(0,a.jsx)("main",{className:"container mx-auto px-fluid-container py-fluid-md md:py-fluid-lg pb-24 md:pb-fluid-xl",children:(0,a.jsx)("div",{className:"max-w-7xl mx-auto",children:(0,a.jsxs)(F.M,{mode:"wait",children:["create"===n&&(0,a.jsx)(R.E.div,{variants:m,initial:"initial",animate:"animate",exit:"exit",transition:u,children:(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-fluid-md lg:gap-fluid-lg",children:[(0,a.jsxs)("div",{className:"space-y-fluid-md",children:[(0,a.jsxs)("div",{className:"glass rounded-fluid-lg p-fluid-md border border-border",children:[(0,a.jsxs)("div",{className:"flex items-center gap-fluid-sm mb-fluid-md",children:[(0,a.jsx)("div",{className:"w-8 h-8 sm:w-10 sm:h-10 bg-primary/20 text-primary rounded-fluid-md flex items-center justify-center",children:(0,a.jsx)(y.Z,{className:"w-4 h-4 sm:w-5 sm:h-5"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-fluid-xl font-bold text-foreground leading-fluid-tight",children:"Create Content"}),(0,a.jsx)("p",{className:"text-fluid-sm text-muted-foreground leading-fluid-tight",children:"Transform photos into viral Reels"})]})]}),(0,a.jsx)(k,{onJobCreated:e=>{t(e),l(!0)},disabled:i})]}),i&&s&&(0,a.jsx)(R.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"glass rounded-fluid-lg p-fluid-md border border-border",children:(0,a.jsx)(I,{jobId:s,onComplete:()=>l(!1)})})]}),(0,a.jsx)("div",{className:"space-y-fluid-md",children:(0,a.jsxs)("div",{className:"glass rounded-fluid-lg p-fluid-md border border-border",children:[(0,a.jsx)("h3",{className:"text-fluid-lg font-bold text-foreground mb-fluid-md leading-fluid-tight",children:"Preview & Download"}),s?(0,a.jsx)(eu,{jobId:s}):(0,a.jsx)("div",{className:"aspect-[9/16] max-w-xs mx-auto bg-muted/30 rounded-fluid-lg border-2 border-dashed border-border flex items-center justify-center p-fluid-md",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(E.Z,{className:"w-12 h-12 sm:w-16 sm:h-16 text-muted-foreground/40 mx-auto mb-fluid-sm"}),(0,a.jsx)("p",{className:"text-muted-foreground text-fluid-sm px-fluid-sm leading-fluid-normal",children:"Your video will appear here"})]})})]})})]})},"create"),"history"===n&&(0,a.jsx)(R.E.div,{variants:m,initial:"initial",animate:"animate",exit:"exit",transition:u,children:(0,a.jsx)("div",{className:"glass rounded-fluid-lg p-fluid-md border border-border",children:(0,a.jsx)(eN,{onJobSelect:e=>{t(e),d("create"),l(!1)}})})},"history"),"settings"===n&&(0,a.jsx)(R.E.div,{variants:m,initial:"initial",animate:"animate",exit:"exit",transition:u,children:(0,a.jsx)(e1,{session:e})},"settings"),"profile"===n&&(0,a.jsx)(R.E.div,{variants:m,initial:"initial",animate:"animate",exit:"exit",transition:u,children:(0,a.jsx)(e7,{session:e})},"profile"),"admin"===n&&(0,a.jsx)(R.E.div,{variants:m,initial:"initial",animate:"animate",exit:"exit",transition:u,children:(0,a.jsx)("div",{className:"glass rounded-fluid-lg p-fluid-md border border-border",children:(0,a.jsx)(sx,{session:e})})},"admin")]})})}),(0,a.jsx)(eE,{activeTab:n,onTabChange:d})]})}su.displayName=st.$j.displayName},6948:function(e,s,t){"use strict";t.d(s,{X:function(){return o},bZ:function(){return d}});var a=t(5444),r=t(9300),i=t(2371),l=t(5522);let n=(0,i.j)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),d=r.forwardRef(({className:e,variant:s,...t},r)=>(0,a.jsx)("div",{ref:r,role:"alert",className:(0,l.cn)(n({variant:s}),e),...t}));d.displayName="Alert",r.forwardRef(({className:e,...s},t)=>(0,a.jsx)("h5",{ref:t,className:(0,l.cn)("mb-1 font-medium leading-none tracking-tight",e),...s})).displayName="AlertTitle";let o=r.forwardRef(({className:e,...s},t)=>(0,a.jsx)("div",{ref:t,className:(0,l.cn)("text-sm [&_p]:leading-relaxed",e),...s}));o.displayName="AlertDescription"},2422:function(e,s,t){"use strict";t.d(s,{d:function(){return d},z:function(){return o}});var a=t(5444),r=t(9300),i=t(8222),l=t(2371),n=t(5522);let d=(0,l.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),o=r.forwardRef(({className:e,variant:s,size:t,asChild:r=!1,...l},o)=>{let c=r?i.g7:"button";return(0,a.jsx)(c,{className:(0,n.cn)(d({variant:s,size:t,className:e})),ref:o,...l})});o.displayName="Button"},4678:function(e,s,t){"use strict";t.d(s,{I:function(){return l}});var a=t(5444),r=t(9300),i=t(5522);let l=r.forwardRef(({className:e,type:s,...t},r)=>(0,a.jsx)("input",{type:s,className:(0,i.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:r,...t}));l.displayName="Input"},4635:function(e,s,t){"use strict";t.d(s,{_:function(){return o}});var a=t(5444),r=t(9300),i=t(4100),l=t(2371),n=t(5522);let d=(0,l.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),o=r.forwardRef(({className:e,...s},t)=>(0,a.jsx)(i.f,{ref:t,className:(0,n.cn)(d(),e),...s}));o.displayName=i.f.displayName},5854:function(e,s,t){"use strict";t.d(s,{pm:function(){return u}});var a=t(9300);let r=0,i=new Map,l=e=>{if(i.has(e))return;let s=setTimeout(()=>{i.delete(e),c({type:"REMOVE_TOAST",toastId:e})},1e6);i.set(e,s)},n=(e,s)=>{switch(s.type){case"ADD_TOAST":return{...e,toasts:[s.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===s.toast.id?{...e,...s.toast}:e)};case"DISMISS_TOAST":{let{toastId:t}=s;return t?l(t):e.toasts.forEach(e=>{l(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===t||void 0===t?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===s.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==s.toastId)}}},d=[],o={toasts:[]};function c(e){o=n(o,e),d.forEach(e=>{e(o)})}function m({...e}){let s=(r=(r+1)%Number.MAX_SAFE_INTEGER).toString(),t=()=>c({type:"DISMISS_TOAST",toastId:s});return c({type:"ADD_TOAST",toast:{...e,id:s,open:!0,onOpenChange:e=>{e||t()}}}),{id:s,dismiss:t,update:e=>c({type:"UPDATE_TOAST",toast:{...e,id:s}})}}function u(){let[e,s]=a.useState(o);return a.useEffect(()=>(d.push(s),()=>{let e=d.indexOf(s);e>-1&&d.splice(e,1)}),[e]),{...e,toast:m,dismiss:e=>c({type:"DISMISS_TOAST",toastId:e})}}},5522:function(e,s,t){"use strict";t.d(s,{cn:function(){return i}});var a=t(2191),r=t(3607);function i(...e){return(0,r.m6)((0,a.W)(e))}}},function(e){e.O(0,[610,593,112,386,156,744],function(){return e(e.s=2202)}),_N_E=e.O()}]);